{"version":3,"sources":["../node_modules/dayjs/dayjs.min.js","../node_modules/dayjs/locale/es.js","../node_modules/artyom.js/build/artyom.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","core/speech/index.js","core/visualizer/improvedNoise.js","core/visualizer/visualizer.js","webpack://shifty/webpack/universalModuleDefinition","webpack://shifty/webpack/bootstrap","webpack://shifty/src/tweenable.js","webpack://shifty/src/easing-functions.js","webpack://shifty/(webpack)/buildin/global.js","webpack://shifty/src/token.js","webpack://shifty/src/interpolate.js","webpack://shifty/src/scene.js","webpack://shifty/src/bezier.js","webpack://shifty/src/index.js","core/visualizer/index.js","app.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["artyom","Artyom","speech","p5","Speech","voiceReady","console","log","setVoice","onLoad","started","startSpeaking","ended","endSpeaking","annyang","isListening","pause","synth","setTimeout","resume","hi","a","speak","loc","alert","bye","search","something","window","open","searchWebsite","website","how","who","saysome","say","ctab","location","close","hour","format","date","SpeechRecognition","webkitSpeechRecognition","finalTranscript","recognition","interimResults","maxAlternatives","continuous","lang","onSpeech","debounced","onresult","event","interimTranscript","i","resultIndex","len","results","length","transcript","isFinal","start","ImprovedNoise","p","fade","t","lerp","b","grad","hash","x","y","z","h","u","v","noise","floorX","floorY","floorZ","X","Y","Z","xMinus1","yMinus1","zMinus1","w","A","AA","AB","B","BA","BB","LoopVisualizer","scene","analyser","mic","RINGCOUNT","SEPARATION","INIT_RADIUS","SEGMENTS","VOL_SENS","BIN_COUNT","rings","geoms","materials","levels","colors","loopHolder","THREE","Object3D","perlin","noisePos","freqByteData","timeByteData","loopGeom","init","Uint8Array","add","scale","alt","circleShape","Shape","absarc","Math","PI","createPointsGeometry","dynamic","m","LineBasicMaterial","color","linewidth","opacity","blending","AdditiveBlending","transparent","line","Line","push","remove","update","getByteFrequencyData","getByteTimeDomainData","sum","aveLevel","scaled_average","aveOffset","n","abs","shift","j","vertices","verticesNeedUpdate","ringId","offset","normLevel","hue","setHSL","root","factory","exports","module","define","amd","installedModules","__webpack_require__","moduleId","l","modules","call","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","mode","__esModule","ns","create","key","bind","object","property","prototype","hasOwnProperty","s","global","scheduleFunction","requestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","mozCancelRequestAnimationFrame","mozRequestAnimationFrame","noop","listHead","listTail","formulas","easingFunctions","tweenProps","forPosition","currentState","originalState","targetState","duration","timestamp","easing","normalizedPosition","easingObjectProp","easingFn","processTween","tween","currentTime","_attachment","_currentState","_delay","_easing","_originalState","_duration","_step","_targetState","_timestamp","endTime","timeToCompute","stop","_applyFilter","processTweens","Tweenable","now","nextTween","_next","composeEasingObject","fromTweenParams","composedEasing","typeofEasing","prop","_previous","previousTween","initialState","config","undefined","this","_configured","_filters","setConfig","filterName","filter","_pausedAtTime","_start","attachment","delay","from","promise","Promise","step","to","_isPlaying","_scheduleId","filters","doesApply","_promise","resolve","reject","_resolve","_reject","state","scheduleUpdate","millisecond","max","gotoEnd","setScheduleFunction","tweenable","fn","Date","linear","pos","easeInQuad","pow","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeOutBounce","easeInBack","easeOutBack","easeInOutBack","elastic","swingFromTo","swingFrom","swingTo","bounce","bouncePast","easeFromTo","easeFrom","easeTo","g","Function","e","number","comma","R_NUMBER_COMPONENT","R_FORMAT_CHUNKS","R_UNFORMATTED_VALUES","R_RGB","source","RegExp","R_RGB_PREFIX","R_HEX","getFormatChunksFrom","rawValues","prefix","map","val","hexToDec","hex","parseInt","convertHexToRGB","hexString","replace","split","substr","join","filterStringChunks","pattern","unfilteredString","patternMatches","match","filteredString","forEach","sanitizeObjectForHexProps","stateObject","currentProp","sanitizeRGBChunk","rgbChunk","numbers","floor","getValuesFrom","formattedString","getFormatSignatures","chunks","signatures","propertyName","formatString","charAt","unshift","chunkNames","expandFormattedProperties","formatSignatures","extractPropertyChunks","extractedValues","chunkName","getValuesList","getFormattedValues","rawValue","toFixed","collapseFormattedProperties","expandEasingObject","easingObject","tokenData","easingNames","defaultEasing","collapseEasingObject","firstEasing","easingName","keys","some","tweenCreated","_tokenData","beforeTween","afterTween","mockTweenable","interpolate","position","current","set","interpolatedValues","Scene","tweenables","index","indexOf","splice","isPlaying","cubicBezierAtTime","p1x","p1y","p2x","p2y","epsilon","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveDerivativeX","fabs","solveEpsilon","sampleCurveY","t0","t1","t2","x2","d2","solveCurveX","setBezierFunction","x1","y1","y2","cubicBezierTransition","getCubicBezierTransition","displayName","unsetBezierFunction","token","mouseX","mouseY","windowHalfX","innerWidth","windowHalfY","innerHeight","camera","renderer","container","buffer","audioBuffer","audioContext","$","document","ready","is_webgl","WebGLRenderingContext","createElement","getContext","html","body","appendChild","PerspectiveCamera","WebGLRenderer","antialias","sortObjects","setSize","domElement","onselectStart","click","initMic","mousemove","onDocumentMouseMove","mouseleave","then","resize","onWindowResize","addEventListener","onDocumentDrop","onDocumentDragOver","clientX","clientY","aspect","updateProjectionMatrix","animate","render","xrot","yrot","rotation","mousewheel","delta","evt","stopPropagation","preventDefault","disconnect","show","text","droppedFiles","dataTransfer","files","reader","FileReader","onload","target","data","result","initAudio","readAsArrayBuffer","navigator","mediaDevices","getUserMedia","audio","video","stream","AudioContext","createMediaStreamSource","createAudio","createBufferSource","decodeAudioData","connect","destination","createBuffer","createAnalyser","fftSize","smoothingTimeConstant","startViz","hide","dayjs","locale","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","id","every","generated","js","clear","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","parents","k","dep","Array","isArray","concat","deps","cached","cache","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;ACDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACx8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/BA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/LA;;AACA;;AAEA;;;;AADA;AAGA;AACA,IAAMA,MAAM,GAAG,IAAIC,eAAJ,EAAf;;eAEe,oBAAM;AACnB,MAAMC,MAAM,GAAG,IAAIC,EAAE,CAACC,MAAP,EAAf;;AAEA,WAASC,UAAT,GAAsB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EADoB,CAEpB;;AACAL,IAAAA,MAAM,CAACM,QAAP,CAAgB,MAAhB,EAHoB,CAIpB;AACA;AACD;;AAEDN,EAAAA,MAAM,CAACO,MAAP,GAAgBJ,UAAhB;AAEAH,EAAAA,MAAM,CAACQ,OAAP,CAAeC,aAAf;AACAT,EAAAA,MAAM,CAACU,KAAP,CAAaC,WAAb;;AAEA,WAASF,aAAT,GAAyB;AACvBL,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBO,OAAO,CAACC,WAAR,EAAvB;;AACA,QAAID,OAAO,CAACC,WAAR,EAAJ,EAA2B;AACzBD,MAAAA,OAAO,CAACE,KAAR;AACD;AACF;;AAED,WAASH,WAAT,GAAuB;AACrB;AAEA;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBL,MAAM,CAACe,KAA7B;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BO,OAAO,CAACC,WAAR,EAA5B;AACAG,IAAAA,UAAU,CAAC,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","file":"app.c328ef1a.js","sourceRoot":"../src","sourcesContent":["!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):t.dayjs=n()}(this,function(){\"use strict\";var t=\"millisecond\",n=\"second\",e=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",o=\"quarter\",a=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return!r||r.length>=n?t:\"\"+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?\"+\":\"-\")+c(r,2,\"0\")+\":\"+c(i,2,\"0\")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:a,w:s,d:i,h:r,m:e,s:n,ms:t,Q:o}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if(\"string\"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i}return e||(l=r),r},g=function(t,n,e){if(y(t))return t.clone();var r=n?\"string\"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u,$offset:n.$offset})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if(\"string\"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,\"$y\",a)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",i)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",r)},d.minute=function(t){return this.$g(t,\"$m\",e)},d.second=function(t){return this.$g(t,\"$s\",n)},d.millisecond=function(n){return this.$g(n,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case\"date\":return $(M+\"Hours\",0);case r:return $(M+\"Minutes\",1);case e:return $(M+\"Seconds\",2);case n:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[i]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[a]=c+\"FullYear\",h[r]=c+\"Hours\",h[e]=c+\"Minutes\",h[n]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.$d.getTime()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return\"Invalid Date\";var e=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,n,e){var r=t<12?\"AM\":\"PM\";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,\"0\"),MMM:c(i.monthsShort,o,h,3),MMMM:h[o]||h(this,e),D:this.$D,DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),r=M(t,n,!0);return r&&(e.$L=r),e},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n","!function(e,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],s):e.dayjs_locale_es=s(e.dayjs)}(this,function(e){\"use strict\";e=e&&e.hasOwnProperty(\"default\")?e.default:e;var s={name:\"es\",monthsShort:\"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic\".split(\"_\"),weekdays:\"domingo_lunes_martes_mircoles_jueves_viernes_sbado\".split(\"_\"),weekdaysShort:\"dom._lun._mar._mi._jue._vie._sb.\".split(\"_\"),weekdaysMin:\"do_lu_ma_mi_ju_vi_s\".split(\"_\"),months:\"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre\".split(\"_\"),weekStart:1,formats:{LT:\"H:mm\",LTS:\"H:mm:ss\",L:\"DD/MM/YYYY\",LL:\"D [de] MMMM [de] YYYY\",LLL:\"D [de] MMMM [de] YYYY H:mm\",LLLL:\"dddd, D [de] MMMM [de] YYYY H:mm\"},relativeTime:{future:\"en %s\",past:\"hace %s\",s:\"unos segundos\",m:\"un minuto\",mm:\"%d minutos\",h:\"una hora\",hh:\"%d horas\",d:\"un da\",dd:\"%d das\",M:\"un mes\",MM:\"%d meses\",y:\"un ao\",yy:\"%d aos\"},ordinal:function(e){return e+\"\"}};return e.locale(s,null,!0),s});\n","\"use strict\";\r\n/**\r\n * Artyom.js is a voice control, speech recognition and speech synthesis JavaScript library.\r\n *\r\n * @requires {webkitSpeechRecognition && speechSynthesis}\r\n * @license MIT\r\n * @version 1.0.6\r\n * @copyright 2017 Our Code World (www.ourcodeworld.com) All Rights Reserved.\r\n * @author Carlos Delgado (https://github.com/sdkcarlos) and Sema Garca (https://github.com/semagarcia)\r\n * @see https://sdkcarlos.github.io/sites/artyom.html\r\n * @see http://docs.ourcodeworld.com/projects/artyom-js\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/// <reference path=\"artyom.d.ts\" />\r\n// Remove \"export default \" keywords if willing to build with `npm run artyom-build-window`\r\nvar Artyom = (function () {\r\n    // Triggered at the declaration of \r\n    function Artyom() {\r\n        this.ArtyomCommands = [];\r\n        this.ArtyomVoicesIdentifiers = {\r\n            // German\r\n            \"de-DE\": [\"Google Deutsch\", \"de-DE\", \"de_DE\"],\r\n            // Spanish\r\n            \"es-ES\": [\"Google espaol\", \"es-ES\", \"es_ES\", \"es-MX\", \"es_MX\"],\r\n            // Italian\r\n            \"it-IT\": [\"Google italiano\", \"it-IT\", \"it_IT\"],\r\n            // Japanese\r\n            \"jp-JP\": [\"Google \", \"ja-JP\", \"ja_JP\"],\r\n            // English USA\r\n            \"en-US\": [\"Google US English\", \"en-US\", \"en_US\"],\r\n            // English UK\r\n            \"en-GB\": [\"Google UK English Male\", \"Google UK English Female\", \"en-GB\", \"en_GB\"],\r\n            // Brazilian Portuguese\r\n            \"pt-BR\": [\"Google portugus do Brasil\", \"pt-PT\", \"pt-BR\", \"pt_PT\", \"pt_BR\"],\r\n            // Portugal Portuguese\r\n            // Note: in desktop, there's no voice for portugal Portuguese\r\n            \"pt-PT\": [\"Google portugus do Brasil\", \"pt-PT\", \"pt_PT\"],\r\n            // Russian\r\n            \"ru-RU\": [\"Google \", \"ru-RU\", \"ru_RU\"],\r\n            // Dutch (holland)\r\n            \"nl-NL\": [\"Google Nederlands\", \"nl-NL\", \"nl_NL\"],\r\n            // French\r\n            \"fr-FR\": [\"Google franais\", \"fr-FR\", \"fr_FR\"],\r\n            // Polish\r\n            \"pl-PL\": [\"Google polski\", \"pl-PL\", \"pl_PL\"],\r\n            // Indonesian\r\n            \"id-ID\": [\"Google Bahasa Indonesia\", \"id-ID\", \"id_ID\"],\r\n            // Hindi\r\n            \"hi-IN\": [\"Google \", \"hi-IN\", \"hi_IN\"],\r\n            // Mandarin Chinese\r\n            \"zh-CN\": [\"Google \", \"zh-CN\", \"zh_CN\"],\r\n            // Cantonese Chinese\r\n            \"zh-HK\": [\"Google \", \"zh-HK\", \"zh_HK\"],\r\n            // Native voice\r\n            \"native\": [\"native\"]\r\n        };\r\n        // Important: retrieve the voices of the browser as soon as possible.\r\n        // Normally, the execution of speechSynthesis.getVoices will return at the first time an empty array.\r\n        if (window.hasOwnProperty('speechSynthesis')) {\r\n            speechSynthesis.getVoices();\r\n        }\r\n        else {\r\n            console.error(\"Artyom.js can't speak without the Speech Synthesis API.\");\r\n        }\r\n        // This instance of webkitSpeechRecognition is the one used by Artyom.\r\n        if (window.hasOwnProperty('webkitSpeechRecognition')) {\r\n            this.ArtyomWebkitSpeechRecognition = new window.webkitSpeechRecognition();\r\n        }\r\n        else {\r\n            console.error(\"Artyom.js can't recognize voice without the Speech Recognition API.\");\r\n        }\r\n        this.ArtyomProperties = {\r\n            lang: 'en-GB',\r\n            recognizing: false,\r\n            continuous: false,\r\n            speed: 1,\r\n            volume: 1,\r\n            listen: false,\r\n            mode: \"normal\",\r\n            debug: false,\r\n            helpers: {\r\n                redirectRecognizedTextOutput: null,\r\n                remoteProcessorHandler: null,\r\n                lastSay: null,\r\n                fatalityPromiseCallback: null\r\n            },\r\n            executionKeyword: null,\r\n            obeyKeyword: null,\r\n            speaking: false,\r\n            obeying: true,\r\n            soundex: false,\r\n            name: null\r\n        };\r\n        this.ArtyomGarbageCollection = [];\r\n        this.ArtyomFlags = {\r\n            restartRecognition: false\r\n        };\r\n        this.ArtyomGlobalEvents = {\r\n            ERROR: \"ERROR\",\r\n            SPEECH_SYNTHESIS_START: \"SPEECH_SYNTHESIS_START\",\r\n            SPEECH_SYNTHESIS_END: \"SPEECH_SYNTHESIS_END\",\r\n            TEXT_RECOGNIZED: \"TEXT_RECOGNIZED\",\r\n            COMMAND_RECOGNITION_START: \"COMMAND_RECOGNITION_START\",\r\n            COMMAND_RECOGNITION_END: \"COMMAND_RECOGNITION_END\",\r\n            COMMAND_MATCHED: \"COMMAND_MATCHED\",\r\n            NOT_COMMAND_MATCHED: \"NOT_COMMAND_MATCHED\"\r\n        };\r\n        this.Device = {\r\n            isMobile: false,\r\n            isChrome: true\r\n        };\r\n        if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {\r\n            this.Device.isMobile = true;\r\n        }\r\n        if (navigator.userAgent.indexOf(\"Chrome\") == -1) {\r\n            this.Device.isChrome = false;\r\n        }\r\n        /**\r\n         * The default voice of Artyom in the Desktop. In mobile, you will need to initialize (or force the language)\r\n         * with a language code in order to find an available voice in the device, otherwise it will use the native voice.\r\n         */\r\n        this.ArtyomVoice = {\r\n            default: false,\r\n            lang: \"en-GB\",\r\n            localService: false,\r\n            name: \"Google UK English Male\",\r\n            voiceURI: \"Google UK English Male\"\r\n        };\r\n    }\r\n    /**\r\n     * Add dinamically commands to artyom using\r\n     * You can even add commands while artyom is active.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/addcommands\r\n     * @since 0.6\r\n     * @param {Object | Array[Objects]} param\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.addCommands = function (param) {\r\n        var _this = this;\r\n        var processCommand = function (command) {\r\n            if (command.hasOwnProperty(\"indexes\")) {\r\n                _this.ArtyomCommands.push(command);\r\n            }\r\n            else {\r\n                console.error(\"The given command doesn't provide any index to execute.\");\r\n            }\r\n        };\r\n        if (param instanceof Array) {\r\n            for (var i = 0; i < param.length; i++) {\r\n                processCommand(param[i]);\r\n            }\r\n        }\r\n        else {\r\n            processCommand(param);\r\n        }\r\n        return true;\r\n    };\r\n    ;\r\n    /**\r\n     * The SpeechSynthesisUtterance objects are stored in the artyom_garbage_collector variable\r\n     * to prevent the wrong behaviour of artyom.say.\r\n     * Use this method to clear all spoken SpeechSynthesisUtterance unused objects.\r\n     *\r\n     * @returns {Array<any>}\r\n     */\r\n    Artyom.prototype.clearGarbageCollection = function () {\r\n        return this.ArtyomGarbageCollection = [];\r\n    };\r\n    ;\r\n    /**\r\n     * Displays a message in the console if the artyom propery DEBUG is set to true.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/debug\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.debug = function (message, type) {\r\n        var preMessage = \"[v\" + this.getVersion() + \"] Artyom.js\";\r\n        if (this.ArtyomProperties.debug === true) {\r\n            switch (type) {\r\n                case \"error\":\r\n                    console.log(\"%c\" + preMessage + \":%c \" + message, 'background: #C12127; color: black;', 'color:black;');\r\n                    break;\r\n                case \"warn\":\r\n                    console.warn(message);\r\n                    break;\r\n                case \"info\":\r\n                    console.log(\"%c\" + preMessage + \":%c \" + message, 'background: #4285F4; color: #FFFFFF', 'color:black;');\r\n                    break;\r\n                default:\r\n                    console.log(\"%c\" + preMessage + \":%c \" + message, 'background: #005454; color: #BFF8F8', 'color:black;');\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Artyom have it's own diagnostics.\r\n     * Run this function in order to detect why artyom is not initialized.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/detecterrors\r\n     * @param {type} callback\r\n     * @returns {}\r\n     */\r\n    Artyom.prototype.detectErrors = function () {\r\n        var _this = this;\r\n        if ((window.location.protocol) == \"file:\") {\r\n            var message = \"Error: running Artyom directly from a file. The APIs require a different communication protocol like HTTP or HTTPS\";\r\n            console.error(message);\r\n            return {\r\n                code: \"artyom_error_localfile\",\r\n                message: message\r\n            };\r\n        }\r\n        if (!_this.Device.isChrome) {\r\n            var message = \"Error: the Speech Recognition and Speech Synthesis APIs require the Google Chrome Browser to work.\";\r\n            console.error(message);\r\n            return {\r\n                code: \"artyom_error_browser_unsupported\",\r\n                message: message\r\n            };\r\n        }\r\n        if (window.location.protocol != \"https:\") {\r\n            console.warn(\"Warning: artyom is being executed using the '\" + window.location.protocol + \"' protocol. The continuous mode requires a secure protocol (HTTPS)\");\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Removes all the added commands of artyom.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/emptycommands\r\n     * @since 0.6\r\n     * @returns {Array}\r\n     */\r\n    Artyom.prototype.emptyCommands = function () {\r\n        return this.ArtyomCommands = [];\r\n    };\r\n    /**\r\n     * Returns an object with data of the matched element\r\n     *\r\n     * @private\r\n     * @param {string} comando\r\n     * @returns {MatchedCommand}\r\n     */\r\n    Artyom.prototype.execute = function (voz) {\r\n        var _this = this;\r\n        if (!voz) {\r\n            console.warn(\"Internal error: Execution of empty command\");\r\n            return;\r\n        }\r\n        // If artyom was initialized with a name, verify that the name begins with it to allow the execution of commands.\r\n        if (_this.ArtyomProperties.name) {\r\n            if (voz.indexOf(_this.ArtyomProperties.name) != 0) {\r\n                _this.debug(\"Artyom requires with a name \\\"\" + _this.ArtyomProperties.name + \"\\\" but the name wasn't spoken.\", \"warn\");\r\n                return;\r\n            }\r\n            // Remove name from voice command\r\n            voz = voz.substr(_this.ArtyomProperties.name.length);\r\n        }\r\n        _this.debug(\">> \" + voz);\r\n        /** @3\r\n         * Artyom needs time to think that\r\n         */\r\n        for (var i = 0; i < _this.ArtyomCommands.length; i++) {\r\n            var instruction = _this.ArtyomCommands[i];\r\n            var opciones = instruction.indexes;\r\n            var encontrado = -1;\r\n            var wildy = \"\";\r\n            for (var c = 0; c < opciones.length; c++) {\r\n                var opcion = opciones[c];\r\n                if (!instruction.smart) {\r\n                    continue; //Jump if is not smart command\r\n                }\r\n                // Process RegExp\r\n                if (opcion instanceof RegExp) {\r\n                    // If RegExp matches \r\n                    if (opcion.test(voz)) {\r\n                        _this.debug(\">> REGEX \" + opcion.toString() + \" MATCHED AGAINST \" + voz + \" WITH INDEX \" + c + \" IN COMMAND \", \"info\");\r\n                        encontrado = parseInt(c.toString());\r\n                    }\r\n                    // Otherwise just wildcards\r\n                }\r\n                else {\r\n                    if (opcion.indexOf(\"*\") != -1) {\r\n                        ///LOGIC HERE\r\n                        var grupo = opcion.split(\"*\");\r\n                        if (grupo.length > 2) {\r\n                            console.warn(\"Artyom found a smart command with \" + (grupo.length - 1) + \" wildcards. Artyom only support 1 wildcard for each command. Sorry\");\r\n                            continue;\r\n                        }\r\n                        //START SMART COMMAND\r\n                        var before = grupo[0];\r\n                        var later = grupo[1];\r\n                        // Wildcard in the end\r\n                        if ((later == \"\") || (later == \" \")) {\r\n                            if ((voz.indexOf(before) != -1) || ((voz.toLowerCase()).indexOf(before.toLowerCase()) != -1)) {\r\n                                wildy = voz.replace(before, '');\r\n                                wildy = (wildy.toLowerCase()).replace(before.toLowerCase(), '');\r\n                                encontrado = parseInt(c.toString());\r\n                            }\r\n                        }\r\n                        else {\r\n                            if ((voz.indexOf(before) != -1) || ((voz.toLowerCase()).indexOf(before.toLowerCase()) != -1)) {\r\n                                if ((voz.indexOf(later) != -1) || ((voz.toLowerCase()).indexOf(later.toLowerCase()) != -1)) {\r\n                                    wildy = voz.replace(before, '').replace(later, '');\r\n                                    wildy = (wildy.toLowerCase()).replace(before.toLowerCase(), '').replace(later.toLowerCase(), '');\r\n                                    wildy = (wildy.toLowerCase()).replace(later.toLowerCase(), '');\r\n                                    encontrado = parseInt(c.toString());\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        console.warn(\"Founded command marked as SMART but have no wildcard in the indexes, remove the SMART for prevent extensive memory consuming or add the wildcard *\");\r\n                    }\r\n                }\r\n                if ((encontrado >= 0)) {\r\n                    encontrado = parseInt(c.toString());\r\n                    break;\r\n                }\r\n            }\r\n            if (encontrado >= 0) {\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_MATCHED);\r\n                var response = {\r\n                    index: encontrado,\r\n                    instruction: instruction,\r\n                    wildcard: {\r\n                        item: wildy,\r\n                        full: voz\r\n                    }\r\n                };\r\n                return response;\r\n            }\r\n        } //End @3\r\n        /** @1\r\n         * Search for IDENTICAL matches in the commands if nothing matches\r\n         * start with a index match in commands\r\n         */\r\n        for (var i = 0; i < _this.ArtyomCommands.length; i++) {\r\n            var instruction = _this.ArtyomCommands[i];\r\n            var opciones = instruction.indexes;\r\n            var encontrado = -1;\r\n            /**\r\n             * Execution of match with identical commands\r\n             */\r\n            for (var c = 0; c < opciones.length; c++) {\r\n                var opcion = opciones[c];\r\n                if (instruction.smart) {\r\n                    continue; //Jump wildcard commands\r\n                }\r\n                if ((voz === opcion)) {\r\n                    _this.debug(\">> MATCHED FULL EXACT OPTION \" + opcion + \" AGAINST \" + voz + \" WITH INDEX \" + c + \" IN COMMAND \", \"info\");\r\n                    encontrado = parseInt(c.toString());\r\n                    break;\r\n                }\r\n                else if ((voz.toLowerCase() === opcion.toLowerCase())) {\r\n                    _this.debug(\">> MATCHED OPTION CHANGING ALL TO LOWERCASE \" + opcion + \" AGAINST \" + voz + \" WITH INDEX \" + c + \" IN COMMAND \", \"info\");\r\n                    encontrado = parseInt(c.toString());\r\n                    break;\r\n                }\r\n            }\r\n            if (encontrado >= 0) {\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_MATCHED);\r\n                var response = {\r\n                    index: encontrado,\r\n                    instruction: instruction\r\n                };\r\n                return response;\r\n            }\r\n        } //End @1\r\n        /**\r\n         * Step 3 Commands recognition.\r\n         * If the command is not smart, and any of the commands match exactly then try to find\r\n         * a command in all the quote.\r\n         */\r\n        for (var i = 0; i < _this.ArtyomCommands.length; i++) {\r\n            var instruction = _this.ArtyomCommands[i];\r\n            var opciones = instruction.indexes;\r\n            var encontrado = -1;\r\n            /**\r\n             * Execution of match with index\r\n             */\r\n            for (var c = 0; c < opciones.length; c++) {\r\n                if (instruction.smart) {\r\n                    continue; //Jump wildcard commands\r\n                }\r\n                var opcion = opciones[c];\r\n                if ((voz.indexOf(opcion) >= 0)) {\r\n                    _this.debug(\">> MATCHED INDEX EXACT OPTION \" + opcion + \" AGAINST \" + voz + \" WITH INDEX \" + c + \" IN COMMAND \", \"info\");\r\n                    encontrado = parseInt(c.toString());\r\n                    break;\r\n                }\r\n                else if (((voz.toLowerCase()).indexOf(opcion.toLowerCase()) >= 0)) {\r\n                    _this.debug(\">> MATCHED INDEX OPTION CHANGING ALL TO LOWERCASE \" + opcion + \" AGAINST \" + voz + \" WITH INDEX \" + c + \" IN COMMAND \", \"info\");\r\n                    encontrado = parseInt(c.toString());\r\n                    break;\r\n                }\r\n            }\r\n            if (encontrado >= 0) {\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_MATCHED);\r\n                var response = {\r\n                    index: encontrado,\r\n                    instruction: instruction\r\n                };\r\n                return response;\r\n            }\r\n        } //End Step 3\r\n        /**\r\n         * If the soundex options is enabled, proceed to process the commands in case that any of the previous\r\n         * ways of processing (exact, lowercase and command in quote) didn't match anything.\r\n         * Based on the soundex algorithm match a command if the spoken text is similar to any of the artyom commands.\r\n         * Example :\r\n         * If you have a command with \"Open Wallmart\" and \"Open Willmar\" is recognized, the open wallmart command will be triggered.\r\n         * soundex(\"Open Wallmart\") == soundex(\"Open Willmar\") <= true\r\n         *\r\n         */\r\n        if (_this.ArtyomProperties.soundex) {\r\n            for (var i = 0; i < _this.ArtyomCommands.length; i++) {\r\n                var instruction = _this.ArtyomCommands[i];\r\n                var opciones = instruction.indexes;\r\n                var encontrado = -1;\r\n                for (var c = 0; c < opciones.length; c++) {\r\n                    var opcion = opciones[c];\r\n                    if (instruction.smart) {\r\n                        continue; //Jump wildcard commands\r\n                    }\r\n                    if (_this.soundex(voz) == _this.soundex(opcion)) {\r\n                        _this.debug(\">> Matched Soundex command '\" + opcion + \"' AGAINST '\" + voz + \"' with index \" + c, \"info\");\r\n                        encontrado = parseInt(c.toString());\r\n                        _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_MATCHED);\r\n                        var response = {\r\n                            index: encontrado,\r\n                            instruction: instruction\r\n                        };\r\n                        return response;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        _this.debug(\"Event reached : \" + _this.ArtyomGlobalEvents.NOT_COMMAND_MATCHED);\r\n        _this.triggerEvent(_this.ArtyomGlobalEvents.NOT_COMMAND_MATCHED);\r\n        return;\r\n    };\r\n    /**\r\n     * Force artyom to stop listen even if is in continuos mode.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/fatality\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.fatality = function () {\r\n        var _this = this;\r\n        //fatalityPromiseCallback\r\n        return new Promise(function (resolve, reject) {\r\n            // Expose the fatality promise callback to the helpers object of Artyom.\r\n            // The promise isn't resolved here itself but in the onend callback of\r\n            // the speechRecognition instance of artyom\r\n            _this.ArtyomProperties.helpers.fatalityPromiseCallback = resolve;\r\n            try {\r\n                // If config is continuous mode, deactivate anyway.\r\n                _this.ArtyomFlags.restartRecognition = false;\r\n                _this.ArtyomWebkitSpeechRecognition.stop();\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Returns an array with all the available commands for artyom.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/getavailablecommands\r\n     * @readonly\r\n     * @returns {Array}\r\n     */\r\n    Artyom.prototype.getAvailableCommands = function () {\r\n        return this.ArtyomCommands;\r\n    };\r\n    /**\r\n     * Artyom can return inmediately the voices available in your browser.\r\n     *\r\n     * @readonly\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/getvoices\r\n     * @returns {Array}\r\n     */\r\n    Artyom.prototype.getVoices = function () {\r\n        return window.speechSynthesis.getVoices();\r\n    };\r\n    /**\r\n     * Verify if the browser supports speechSynthesis.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/speechsupported\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.speechSupported = function () {\r\n        return 'speechSynthesis' in window;\r\n    };\r\n    /**\r\n     * Verify if the browser supports webkitSpeechRecognition.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/recognizingsupported\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.recognizingSupported = function () {\r\n        return 'webkitSpeechRecognition' in window;\r\n    };\r\n    /**\r\n     * Stops the actual and pendings messages that artyom have to say.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/shutup\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.shutUp = function () {\r\n        if ('speechSynthesis' in window) {\r\n            do {\r\n                window.speechSynthesis.cancel();\r\n            } while (window.speechSynthesis.pending === true);\r\n        }\r\n        this.ArtyomProperties.speaking = false;\r\n        this.clearGarbageCollection();\r\n    };\r\n    /**\r\n     * Returns an object with the actual properties of artyom.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/getproperties\r\n     * @returns {object}\r\n     */\r\n    Artyom.prototype.getProperties = function () {\r\n        return this.ArtyomProperties;\r\n    };\r\n    /**\r\n     * Returns the code language of artyom according to initialize function.\r\n     * if initialize not used returns english GB.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/getlanguage\r\n     * @returns {String}\r\n     */\r\n    Artyom.prototype.getLanguage = function () {\r\n        return this.ArtyomProperties.lang;\r\n    };\r\n    /**\r\n     * Retrieves the used version of Artyom.js\r\n     *\r\n     * @returns {String}\r\n     */\r\n    Artyom.prototype.getVersion = function () {\r\n        return '1.0.6';\r\n    };\r\n    /**\r\n     * Artyom awaits for orders when this function\r\n     * is executed.\r\n     *\r\n     * If artyom gets a first parameter the instance will be stopped.\r\n     *\r\n     * @private\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.hey = function (resolve, reject) {\r\n        var start_timestamp;\r\n        var artyom_is_allowed;\r\n        var _this = this;\r\n        /**\r\n         * On mobile devices the recognized text is always thrown twice.\r\n         * By setting the following configuration, fixes the issue\r\n         */\r\n        if (this.Device.isMobile) {\r\n            this.ArtyomWebkitSpeechRecognition.continuous = false;\r\n            this.ArtyomWebkitSpeechRecognition.interimResults = false;\r\n            this.ArtyomWebkitSpeechRecognition.maxAlternatives = 1;\r\n        }\r\n        else {\r\n            this.ArtyomWebkitSpeechRecognition.continuous = true;\r\n            this.ArtyomWebkitSpeechRecognition.interimResults = true;\r\n        }\r\n        this.ArtyomWebkitSpeechRecognition.lang = this.ArtyomProperties.lang;\r\n        this.ArtyomWebkitSpeechRecognition.onstart = function () {\r\n            _this.debug(\"Event reached : \" + _this.ArtyomGlobalEvents.COMMAND_RECOGNITION_START);\r\n            _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_RECOGNITION_START);\r\n            _this.ArtyomProperties.recognizing = true;\r\n            artyom_is_allowed = true;\r\n            resolve();\r\n        };\r\n        /**\r\n         * Handle all artyom posible exceptions\r\n         *\r\n         * @param {type} event\r\n         * @returns {undefined}\r\n         */\r\n        this.ArtyomWebkitSpeechRecognition.onerror = function (event) {\r\n            // Reject promise on initialization\r\n            reject(event.error);\r\n            // Dispath error globally (artyom.when)\r\n            _this.triggerEvent(_this.ArtyomGlobalEvents.ERROR, {\r\n                code: event.error\r\n            });\r\n            if (event.error == 'audio-capture') {\r\n                artyom_is_allowed = false;\r\n            }\r\n            if (event.error == 'not-allowed') {\r\n                artyom_is_allowed = false;\r\n                if (event.timeStamp - start_timestamp < 100) {\r\n                    _this.triggerEvent(_this.ArtyomGlobalEvents.ERROR, {\r\n                        code: \"info-blocked\",\r\n                        message: \"Artyom needs the permision of the microphone, is blocked.\"\r\n                    });\r\n                }\r\n                else {\r\n                    _this.triggerEvent(_this.ArtyomGlobalEvents.ERROR, {\r\n                        code: \"info-denied\",\r\n                        message: \"Artyom needs the permision of the microphone, is denied\"\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * Check if continuous mode is active and restart the recognition.\r\n         * Throw events too.\r\n         *\r\n         * @returns {undefined}\r\n         */\r\n        _this.ArtyomWebkitSpeechRecognition.onend = function () {\r\n            if (_this.ArtyomFlags.restartRecognition === true) {\r\n                if (artyom_is_allowed === true) {\r\n                    _this.ArtyomWebkitSpeechRecognition.start();\r\n                    _this.debug(\"Continuous mode enabled, restarting\", \"info\");\r\n                }\r\n                else {\r\n                    console.error(\"Verify the microphone and check for the table of errors in sdkcarlos.github.io/sites/artyom.html to solve your problem. If you want to give your user a message when an error appears add an artyom listener\");\r\n                }\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_RECOGNITION_END, {\r\n                    code: \"continuous_mode_enabled\",\r\n                    message: \"OnEnd event reached with continuous mode\"\r\n                });\r\n            }\r\n            else {\r\n                // If the fatality promise callback was set, invoke it\r\n                if (_this.ArtyomProperties.helpers.fatalityPromiseCallback) {\r\n                    // As the speech recognition doesn't finish really, wait 500ms\r\n                    // to trigger the real fatality callback\r\n                    setTimeout(function () {\r\n                        _this.ArtyomProperties.helpers.fatalityPromiseCallback();\r\n                    }, 500);\r\n                    _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_RECOGNITION_END, {\r\n                        code: \"continuous_mode_disabled\",\r\n                        message: \"OnEnd event reached without continuous mode\"\r\n                    });\r\n                }\r\n            }\r\n            _this.ArtyomProperties.recognizing = false;\r\n        };\r\n        /**\r\n         * Declare the processor dinamycally according to the mode of artyom\r\n         * to increase the performance.\r\n         *\r\n         * @type {Function}\r\n         * @return\r\n         */\r\n        var onResultProcessor;\r\n        // Process the recognition in normal mode\r\n        if (_this.ArtyomProperties.mode == \"normal\") {\r\n            onResultProcessor = function (event) {\r\n                if (!_this.ArtyomCommands.length) {\r\n                    _this.debug(\"No commands to process in normal mode.\");\r\n                    return;\r\n                }\r\n                var cantidadResultados = event.results.length;\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.TEXT_RECOGNIZED);\r\n                for (var i = event.resultIndex; i < cantidadResultados; ++i) {\r\n                    var identificated = event.results[i][0].transcript;\r\n                    if (event.results[i].isFinal) {\r\n                        var comando = _this.execute(identificated.trim());\r\n                        // Redirect the output of the text if necessary\r\n                        if (typeof (_this.ArtyomProperties.helpers.redirectRecognizedTextOutput) === \"function\") {\r\n                            _this.ArtyomProperties.helpers.redirectRecognizedTextOutput(identificated, true);\r\n                        }\r\n                        if ((comando) && (_this.ArtyomProperties.recognizing == true)) {\r\n                            _this.debug(\"<< Executing Matching Recognition in normal mode >>\", \"info\");\r\n                            _this.ArtyomWebkitSpeechRecognition.stop();\r\n                            _this.ArtyomProperties.recognizing = false;\r\n                            // Execute the command if smart\r\n                            if (comando.wildcard) {\r\n                                comando.instruction.action(comando.index, comando.wildcard.item, comando.wildcard.full);\r\n                                // Execute a normal command\r\n                            }\r\n                            else {\r\n                                comando.instruction.action(comando.index);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Redirect output when necesary\r\n                        if (typeof (_this.ArtyomProperties.helpers.redirectRecognizedTextOutput) === \"function\") {\r\n                            _this.ArtyomProperties.helpers.redirectRecognizedTextOutput(identificated, false);\r\n                        }\r\n                        if (typeof (_this.ArtyomProperties.executionKeyword) === \"string\") {\r\n                            if (identificated.indexOf(_this.ArtyomProperties.executionKeyword) != -1) {\r\n                                var comando = _this.execute(identificated.replace(_this.ArtyomProperties.executionKeyword, '').trim());\r\n                                if ((comando) && (_this.ArtyomProperties.recognizing == true)) {\r\n                                    _this.debug(\"<< Executing command ordered by ExecutionKeyword >>\", 'info');\r\n                                    _this.ArtyomWebkitSpeechRecognition.stop();\r\n                                    _this.ArtyomProperties.recognizing = false;\r\n                                    //Executing Command Action\r\n                                    if (comando.wildcard) {\r\n                                        comando.instruction.action(comando.index, comando.wildcard.item, comando.wildcard.full);\r\n                                    }\r\n                                    else {\r\n                                        comando.instruction.action(comando.index);\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        _this.debug(\"Normal mode : \" + identificated);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        // Process the recognition in quick mode\r\n        if (_this.ArtyomProperties.mode == \"quick\") {\r\n            onResultProcessor = function (event) {\r\n                if (!_this.ArtyomCommands.length) {\r\n                    _this.debug(\"No commands to process.\");\r\n                    return;\r\n                }\r\n                var cantidadResultados = event.results.length;\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.TEXT_RECOGNIZED);\r\n                for (var i = event.resultIndex; i < cantidadResultados; ++i) {\r\n                    var identificated = event.results[i][0].transcript;\r\n                    if (!event.results[i].isFinal) {\r\n                        var comando = _this.execute(identificated.trim());\r\n                        //Redirect output when necesary\r\n                        if (typeof (_this.ArtyomProperties.helpers.redirectRecognizedTextOutput) === \"function\") {\r\n                            _this.ArtyomProperties.helpers.redirectRecognizedTextOutput(identificated, true);\r\n                        }\r\n                        if ((comando) && (_this.ArtyomProperties.recognizing == true)) {\r\n                            _this.debug(\"<< Executing Matching Recognition in quick mode >>\", \"info\");\r\n                            _this.ArtyomWebkitSpeechRecognition.stop();\r\n                            _this.ArtyomProperties.recognizing = false;\r\n                            //Executing Command Action\r\n                            if (comando.wildcard) {\r\n                                comando.instruction.action(comando.index, comando.wildcard.item);\r\n                            }\r\n                            else {\r\n                                comando.instruction.action(comando.index);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        var comando = _this.execute(identificated.trim());\r\n                        //Redirect output when necesary\r\n                        if (typeof (_this.ArtyomProperties.helpers.redirectRecognizedTextOutput) === \"function\") {\r\n                            _this.ArtyomProperties.helpers.redirectRecognizedTextOutput(identificated, false);\r\n                        }\r\n                        if ((comando) && (_this.ArtyomProperties.recognizing == true)) {\r\n                            _this.debug(\"<< Executing Matching Recognition in quick mode >>\", \"info\");\r\n                            _this.ArtyomWebkitSpeechRecognition.stop();\r\n                            _this.ArtyomProperties.recognizing = false;\r\n                            //Executing Command Action\r\n                            if (comando.wildcard) {\r\n                                comando.instruction.action(comando.index, comando.wildcard.item);\r\n                            }\r\n                            else {\r\n                                comando.instruction.action(comando.index);\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    _this.debug(\"Quick mode : \" + identificated);\r\n                }\r\n            };\r\n        }\r\n        // Process the recognition in remote mode\r\n        if (_this.ArtyomProperties.mode == \"remote\") {\r\n            onResultProcessor = function (event) {\r\n                var cantidadResultados = event.results.length;\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.TEXT_RECOGNIZED);\r\n                if (typeof (_this.ArtyomProperties.helpers.remoteProcessorHandler) !== \"function\") {\r\n                    return _this.debug(\"The remoteProcessorService is undefined.\", \"warn\");\r\n                }\r\n                for (var i = event.resultIndex; i < cantidadResultados; ++i) {\r\n                    var identificated = event.results[i][0].transcript;\r\n                    _this.ArtyomProperties.helpers.remoteProcessorHandler({\r\n                        text: identificated,\r\n                        isFinal: event.results[i].isFinal\r\n                    });\r\n                }\r\n            };\r\n        }\r\n        /**\r\n         * Process the recognition event with the previously\r\n         * declared processor function.\r\n         *\r\n         * @param {type} event\r\n         * @returns {undefined}\r\n         */\r\n        _this.ArtyomWebkitSpeechRecognition.onresult = function (event) {\r\n            if (_this.ArtyomProperties.obeying) {\r\n                onResultProcessor(event);\r\n            }\r\n            else {\r\n                // Handle obeyKeyword if exists and artyom is not obeying\r\n                if (!_this.ArtyomProperties.obeyKeyword) {\r\n                    return;\r\n                }\r\n                var temporal = \"\";\r\n                var interim = \"\";\r\n                for (var i = 0; i < event.results.length; ++i) {\r\n                    if (event.results[i].isFinal) {\r\n                        temporal += event.results[i][0].transcript;\r\n                    }\r\n                    else {\r\n                        interim += event.results[i][0].transcript;\r\n                    }\r\n                }\r\n                _this.debug(\"Artyom is not obeying\", \"warn\");\r\n                // If the obeyKeyword is found in the recognized text\r\n                // enable command recognition again\r\n                if (((interim).indexOf(_this.ArtyomProperties.obeyKeyword) > -1) || (temporal).indexOf(_this.ArtyomProperties.obeyKeyword) > -1) {\r\n                    _this.ArtyomProperties.obeying = true;\r\n                }\r\n            }\r\n        };\r\n        if (_this.ArtyomProperties.recognizing) {\r\n            _this.ArtyomWebkitSpeechRecognition.stop();\r\n            _this.debug(\"Event reached : \" + _this.ArtyomGlobalEvents.COMMAND_RECOGNITION_END);\r\n            _this.triggerEvent(_this.ArtyomGlobalEvents.COMMAND_RECOGNITION_END);\r\n        }\r\n        else {\r\n            try {\r\n                _this.ArtyomWebkitSpeechRecognition.start();\r\n            }\r\n            catch (e) {\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.ERROR, {\r\n                    code: \"recognition_overlap\",\r\n                    message: \"A webkitSpeechRecognition instance has been started while there's already running. Is recommendable to restart the Browser\"\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Set up artyom for the application.\r\n     *\r\n     * This function will set the default language used by artyom\r\n     * or notice the user if artyom is not supported in the actual\r\n     * browser\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/initialize\r\n     * @param {Object} config\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.initialize = function (config) {\r\n        var _this = this;\r\n        if (typeof (config) !== \"object\") {\r\n            return Promise.reject(\"You must give the configuration for start artyom properly.\");\r\n        }\r\n        if (config.hasOwnProperty(\"lang\")) {\r\n            _this.ArtyomVoice = _this.getVoice(config.lang);\r\n            _this.ArtyomProperties.lang = config.lang;\r\n        }\r\n        if (config.hasOwnProperty(\"continuous\")) {\r\n            if (config.continuous) {\r\n                this.ArtyomProperties.continuous = true;\r\n                this.ArtyomFlags.restartRecognition = true;\r\n            }\r\n            else {\r\n                this.ArtyomProperties.continuous = false;\r\n                this.ArtyomFlags.restartRecognition = false;\r\n            }\r\n        }\r\n        if (config.hasOwnProperty(\"speed\")) {\r\n            this.ArtyomProperties.speed = config.speed;\r\n        }\r\n        if (config.hasOwnProperty(\"soundex\")) {\r\n            this.ArtyomProperties.soundex = config.soundex;\r\n        }\r\n        if (config.hasOwnProperty(\"executionKeyword\")) {\r\n            this.ArtyomProperties.executionKeyword = config.executionKeyword;\r\n        }\r\n        if (config.hasOwnProperty(\"obeyKeyword\")) {\r\n            this.ArtyomProperties.obeyKeyword = config.obeyKeyword;\r\n        }\r\n        if (config.hasOwnProperty(\"volume\")) {\r\n            this.ArtyomProperties.volume = config.volume;\r\n        }\r\n        if (config.hasOwnProperty(\"listen\")) {\r\n            this.ArtyomProperties.listen = config.listen;\r\n        }\r\n        if (config.hasOwnProperty(\"name\")) {\r\n            this.ArtyomProperties.name = config.name;\r\n        }\r\n        if (config.hasOwnProperty(\"debug\")) {\r\n            this.ArtyomProperties.debug = config.debug;\r\n        }\r\n        else {\r\n            console.warn(\"The initialization doesn't provide how the debug mode should be handled. Is recommendable to set this value either to true or false.\");\r\n        }\r\n        if (config.mode) {\r\n            this.ArtyomProperties.mode = config.mode;\r\n        }\r\n        if (this.ArtyomProperties.listen === true) {\r\n            return new Promise(function (resolve, reject) {\r\n                _this.hey(resolve, reject);\r\n            });\r\n        }\r\n        return Promise.resolve(true);\r\n    };\r\n    /**\r\n     * Add commands like an artisan. If you use artyom for simple tasks\r\n     * then probably you don't like to write a lot to achieve it.\r\n     *\r\n     * Use the artisan syntax to write less, but with the same accuracy.\r\n     *\r\n     * @disclaimer Not a promise-based implementation, just syntax.\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.on = function (indexes, smart) {\r\n        var _this = this;\r\n        return {\r\n            then: function (action) {\r\n                var command = {\r\n                    indexes: indexes,\r\n                    action: action\r\n                };\r\n                if (smart) {\r\n                    command.smart = true;\r\n                }\r\n                _this.addCommands(command);\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * Generates an artyom event with the designed name\r\n     *\r\n     * @param {type} name\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.triggerEvent = function (name, param) {\r\n        var event = new CustomEvent(name, {\r\n            'detail': param\r\n        });\r\n        document.dispatchEvent(event);\r\n        return event;\r\n    };\r\n    /**\r\n     * Repeats the last sentence that artyom said.\r\n     * Useful in noisy environments.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/repeatlastsay\r\n     * @param {Boolean} returnObject If set to true, an object with the text and the timestamp when was executed will be returned.\r\n     * @returns {Object}\r\n     */\r\n    Artyom.prototype.repeatLastSay = function (returnObject) {\r\n        var last = this.ArtyomProperties.helpers.lastSay;\r\n        if (returnObject) {\r\n            return last;\r\n        }\r\n        else {\r\n            if (last != null) {\r\n                this.say(last.text);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Create a listener when an artyom action is called.\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/when\r\n     * @param {type} event\r\n     * @param {type} action\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.when = function (event, action) {\r\n        return document.addEventListener(event, function (e) {\r\n            action(e[\"detail\"]);\r\n        }, false);\r\n    };\r\n    /**\r\n     * Process the recognized text if artyom is active in remote mode.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.remoteProcessorService = function (action) {\r\n        this.ArtyomProperties.helpers.remoteProcessorHandler = action;\r\n        return true;\r\n    };\r\n    /**\r\n     * Verify if there's a voice available for a language using its language code identifier.\r\n     *\r\n     * @return {Boolean}\r\n     */\r\n    Artyom.prototype.voiceAvailable = function (languageCode) {\r\n        return typeof (this.getVoice(languageCode)) !== \"undefined\";\r\n    };\r\n    /**\r\n     * A boolean to check if artyom is obeying commands or not.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.isObeying = function () {\r\n        return this.ArtyomProperties.obeying;\r\n    };\r\n    /**\r\n     * Allow artyom to obey commands again.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.obey = function () {\r\n        return this.ArtyomProperties.obeying = true;\r\n    };\r\n    /**\r\n     * Pause the processing of commands. Artyom still listening in the background and it can be resumed after a couple of seconds.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.dontObey = function () {\r\n        return this.ArtyomProperties.obeying = false;\r\n    };\r\n    /**\r\n     * This function returns a boolean according to the speechSynthesis status\r\n     * if artyom is speaking, will return true.\r\n     *\r\n     * Note: This is not a feature of speechSynthesis, therefore this value hangs on\r\n     * the fiability of the onStart and onEnd events of the speechSynthesis\r\n     *\r\n     * @since 0.9.3\r\n     * @summary Returns true if speechSynthesis is active\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.isSpeaking = function () {\r\n        return this.ArtyomProperties.speaking;\r\n    };\r\n    /**\r\n     * This function returns a boolean according to the SpeechRecognition status\r\n     * if artyom is listening, will return true.\r\n     *\r\n     * Note: This is not a feature of SpeechRecognition, therefore this value hangs on\r\n     * the fiability of the onStart and onEnd events of the SpeechRecognition\r\n     *\r\n     * @since 0.9.3\r\n     * @summary Returns true if SpeechRecognition is active\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.isRecognizing = function () {\r\n        return this.ArtyomProperties.recognizing;\r\n    };\r\n    /**\r\n     * This function will return the webkitSpeechRecognition object used by artyom\r\n     * retrieve it only to debug on it or get some values, do not make changes directly\r\n     *\r\n     * @readonly\r\n     * @since 0.9.2\r\n     * @summary Retrieve the native webkitSpeechRecognition object\r\n     * @returns {Object webkitSpeechRecognition}\r\n     */\r\n    Artyom.prototype.getNativeApi = function () {\r\n        return this.ArtyomWebkitSpeechRecognition;\r\n    };\r\n    /**\r\n     * Returns the SpeechSynthesisUtterance garbageobjects.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    Artyom.prototype.getGarbageCollection = function () {\r\n        return this.ArtyomGarbageCollection;\r\n    };\r\n    /**\r\n     *  Retrieve a single voice of the browser by it's language code.\r\n     *  It will return the first voice available for the language on every device.\r\n     *\r\n     * @param languageCode\r\n     */\r\n    Artyom.prototype.getVoice = function (languageCode) {\r\n        var voiceIdentifiersArray = this.ArtyomVoicesIdentifiers[languageCode];\r\n        if (!voiceIdentifiersArray) {\r\n            console.warn(\"The providen language \" + languageCode + \" isn't available, using English Great britain as default\");\r\n            voiceIdentifiersArray = this.ArtyomVoicesIdentifiers[\"en-GB\"];\r\n        }\r\n        var voice = undefined;\r\n        var voices = speechSynthesis.getVoices();\r\n        var voicesLength = voiceIdentifiersArray.length;\r\n        var _loop_1 = function (i) {\r\n            var foundVoice = voices.filter(function (voice) {\r\n                return ((voice.name == voiceIdentifiersArray[i]) || (voice.lang == voiceIdentifiersArray[i]));\r\n            })[0];\r\n            if (foundVoice) {\r\n                voice = foundVoice;\r\n                return \"break\";\r\n            }\r\n        };\r\n        for (var i = 0; i < voicesLength; i++) {\r\n            var state_1 = _loop_1(i);\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n        return voice;\r\n    };\r\n    /**\r\n     * Artyom provide an easy way to create a\r\n     * dictation for your user.\r\n     *\r\n     * Just create an instance and start and stop when you want\r\n     *\r\n     * @returns Object | newDictation\r\n     */\r\n    Artyom.prototype.newDictation = function (settings) {\r\n        var _this = this;\r\n        if (!_this.recognizingSupported()) {\r\n            console.error(\"SpeechRecognition is not supported in this browser\");\r\n            return false;\r\n        }\r\n        var dictado = new window.webkitSpeechRecognition();\r\n        dictado.continuous = true;\r\n        dictado.interimResults = true;\r\n        dictado.lang = _this.ArtyomProperties.lang;\r\n        dictado.onresult = function (event) {\r\n            var temporal = \"\";\r\n            var interim = \"\";\r\n            for (var i = 0; i < event.results.length; ++i) {\r\n                if (event.results[i].isFinal) {\r\n                    temporal += event.results[i][0].transcript;\r\n                }\r\n                else {\r\n                    interim += event.results[i][0].transcript;\r\n                }\r\n            }\r\n            if (settings.onResult) {\r\n                settings.onResult(interim, temporal);\r\n            }\r\n        };\r\n        return new function () {\r\n            var dictation = dictado;\r\n            var flagStartCallback = true;\r\n            var flagRestart = false;\r\n            this.onError = null;\r\n            this.start = function () {\r\n                if (settings.continuous === true) {\r\n                    flagRestart = true;\r\n                }\r\n                dictation.onstart = function () {\r\n                    if (typeof (settings.onStart) === \"function\") {\r\n                        if (flagStartCallback === true) {\r\n                            settings.onStart();\r\n                        }\r\n                    }\r\n                };\r\n                dictation.onend = function () {\r\n                    if (flagRestart === true) {\r\n                        flagStartCallback = false;\r\n                        dictation.start();\r\n                    }\r\n                    else {\r\n                        flagStartCallback = true;\r\n                        if (typeof (settings.onEnd) === \"function\") {\r\n                            settings.onEnd();\r\n                        }\r\n                    }\r\n                };\r\n                dictation.start();\r\n            };\r\n            this.stop = function () {\r\n                flagRestart = false;\r\n                dictation.stop();\r\n            };\r\n            if (typeof (settings.onError) === \"function\") {\r\n                dictation.onerror = settings.onError;\r\n            }\r\n        };\r\n    };\r\n    /**\r\n     * A voice prompt will be executed.\r\n     *\r\n     * @param {type} config\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.newPrompt = function (config) {\r\n        if (typeof (config) !== \"object\") {\r\n            console.error(\"Expected the prompt configuration.\");\r\n        }\r\n        var copyActualCommands = Object.assign([], this.ArtyomCommands);\r\n        var _this = this;\r\n        this.emptyCommands();\r\n        var promptCommand = {\r\n            description: \"Setting the artyom commands only for the prompt. The commands will be restored after the prompt finishes\",\r\n            indexes: config.options,\r\n            action: function (i, wildcard) {\r\n                _this.ArtyomCommands = copyActualCommands;\r\n                var toExe = config.onMatch(i, wildcard);\r\n                if (typeof (toExe) !== \"function\") {\r\n                    console.error(\"onMatch function expects a returning function to be executed\");\r\n                    return;\r\n                }\r\n                toExe();\r\n            }\r\n        };\r\n        if (config.smart) {\r\n            promptCommand.smart = true;\r\n        }\r\n        this.addCommands(promptCommand);\r\n        if (typeof (config.beforePrompt) !== \"undefined\") {\r\n            config.beforePrompt();\r\n        }\r\n        var callbacks = {\r\n            onStart: function () {\r\n                if (typeof (config.onStartPrompt) !== \"undefined\") {\r\n                    config.onStartPrompt();\r\n                }\r\n            },\r\n            onEnd: function () {\r\n                if (typeof (config.onEndPrompt) !== \"undefined\") {\r\n                    config.onEndPrompt();\r\n                }\r\n            }\r\n        };\r\n        this.say(config.question, callbacks);\r\n    };\r\n    /**\r\n     * Says a random quote and returns it's object\r\n     *\r\n     * @param {type} data\r\n     * @returns {object}\r\n     */\r\n    Artyom.prototype.sayRandom = function (data) {\r\n        if (data instanceof Array) {\r\n            var index = Math.floor(Math.random() * data.length);\r\n            this.say(data[index]);\r\n            return {\r\n                text: data[index],\r\n                index: index\r\n            };\r\n        }\r\n        else {\r\n            console.error(\"Random quotes must be in an array !\");\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * Shortcut method to enable the artyom debug on the fly.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    Artyom.prototype.setDebug = function (status) {\r\n        if (status) {\r\n            return this.ArtyomProperties.debug = true;\r\n        }\r\n        else {\r\n            return this.ArtyomProperties.debug = false;\r\n        }\r\n    };\r\n    /**\r\n     * Simulate a voice command via JS\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/simulateinstruction\r\n     * @param {type} sentence\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.simulateInstruction = function (sentence) {\r\n        var _this = this;\r\n        if ((!sentence) || (typeof (sentence) !== \"string\")) {\r\n            console.warn(\"Cannot execute a non string command\");\r\n            return false;\r\n        }\r\n        var foundCommand = _this.execute(sentence); //Command founded object\r\n        if (typeof (foundCommand) === \"object\") {\r\n            if (foundCommand.instruction) {\r\n                if (foundCommand.instruction.smart) {\r\n                    _this.debug('Smart command matches with simulation, executing', \"info\");\r\n                    foundCommand.instruction.action(foundCommand.index, foundCommand.wildcard.item, foundCommand.wildcard.full);\r\n                }\r\n                else {\r\n                    _this.debug('Command matches with simulation, executing', \"info\");\r\n                    foundCommand.instruction.action(foundCommand.index); //Execute Normal command\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        else {\r\n            console.warn(\"No command founded trying with \" + sentence);\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Javascript implementation of the soundex algorithm.\r\n     * @see https://gist.github.com/shawndumas/1262659\r\n     * @returns {String}\r\n     */\r\n    Artyom.prototype.soundex = function (s) {\r\n        var a = s.toLowerCase().split('');\r\n        var f = a.shift();\r\n        var r = '';\r\n        var codes = { a: \"\", e: \"\", i: \"\", o: \"\", u: \"\", b: 1, f: 1, p: 1, v: 1, c: 2, g: 2, j: 2, k: 2, q: 2, s: 2, x: 2, z: 2, d: 3, t: 3, l: 4, m: 5, n: 5, r: 6 };\r\n        r = f + a\r\n            .map(function (v, i, a) {\r\n            return codes[v];\r\n        })\r\n            .filter(function (v, i, a) {\r\n            return ((i === 0) ? v !== codes[f] : v !== a[i - 1]);\r\n        })\r\n            .join('');\r\n        return (r + '000').slice(0, 4).toUpperCase();\r\n    };\r\n    /**\r\n     * Splits a string into an array of strings with a limited size (chunk_length).\r\n     *\r\n     * @param {String} input text to split into chunks\r\n     * @param {Integer} chunk_length limit of characters in every chunk\r\n     */\r\n    Artyom.prototype.splitStringByChunks = function (input, chunk_length) {\r\n        input = input || \"\";\r\n        chunk_length = chunk_length || 100;\r\n        var curr = chunk_length;\r\n        var prev = 0;\r\n        var output = [];\r\n        while (input[curr]) {\r\n            if (input[curr++] == ' ') {\r\n                output.push(input.substring(prev, curr));\r\n                prev = curr;\r\n                curr += chunk_length;\r\n            }\r\n        }\r\n        output.push(input.substr(prev));\r\n        return output;\r\n    };\r\n    /**\r\n     * Allows to retrieve the recognized spoken text of artyom\r\n     * and do something with it everytime something is recognized\r\n     *\r\n     * @param {String} action\r\n     * @returns {Boolean}\r\n     */\r\n    Artyom.prototype.redirectRecognizedTextOutput = function (action) {\r\n        if (typeof (action) != \"function\") {\r\n            console.warn(\"Expected function to handle the recognized text ...\");\r\n            return false;\r\n        }\r\n        this.ArtyomProperties.helpers.redirectRecognizedTextOutput = action;\r\n        return true;\r\n    };\r\n    /**\r\n     * Restarts artyom with the initial configuration.\r\n     *\r\n     * @param configuration\r\n     */\r\n    Artyom.prototype.restart = function () {\r\n        var _this = this;\r\n        var _copyInit = _this.ArtyomProperties;\r\n        return new Promise(function (resolve, reject) {\r\n            _this.fatality().then(function () {\r\n                _this.initialize(_copyInit).then(resolve, reject);\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Talks a text according to the given parameters.\r\n     *\r\n     * @private This function is only to be used internally.\r\n     * @param {String} text Text to be spoken\r\n     * @param {Int} actualChunk Number of chunk of the\r\n     * @param {Int} totalChunks\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.talk = function (text, actualChunk, totalChunks, callbacks) {\r\n        var _this = this;\r\n        var msg = new SpeechSynthesisUtterance();\r\n        msg.text = text;\r\n        msg.volume = this.ArtyomProperties.volume;\r\n        msg.rate = this.ArtyomProperties.speed;\r\n        // Select the voice according to the selected\r\n        var availableVoice = _this.getVoice(_this.ArtyomProperties.lang);\r\n        if (callbacks) {\r\n            // If the language to speak has been forced, use it\r\n            if (callbacks.hasOwnProperty(\"lang\")) {\r\n                availableVoice = _this.getVoice(callbacks.lang);\r\n            }\r\n        }\r\n        // If is a mobile device, provide only the language code in the lang property i.e \"es_ES\"\r\n        if (this.Device.isMobile) {\r\n            // Try to set the voice only if exists, otherwise don't use anything to use the native voice\r\n            if (availableVoice) {\r\n                msg.lang = availableVoice.lang;\r\n            }\r\n            // If browser provide the entire object\r\n        }\r\n        else {\r\n            msg.voice = availableVoice;\r\n        }\r\n        // If is first text chunk (onStart)\r\n        if (actualChunk == 1) {\r\n            msg.addEventListener('start', function () {\r\n                // Set artyom is talking\r\n                _this.ArtyomProperties.speaking = true;\r\n                // Trigger the onSpeechSynthesisStart event\r\n                _this.debug(\"Event reached : \" + _this.ArtyomGlobalEvents.SPEECH_SYNTHESIS_START);\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.SPEECH_SYNTHESIS_START);\r\n                // Trigger the onStart callback if exists\r\n                if (callbacks) {\r\n                    if (typeof (callbacks.onStart) == \"function\") {\r\n                        callbacks.onStart.call(msg);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // If is final text chunk (onEnd)\r\n        if ((actualChunk) >= totalChunks) {\r\n            msg.addEventListener('end', function () {\r\n                // Set artyom is talking\r\n                _this.ArtyomProperties.speaking = false;\r\n                // Trigger the onSpeechSynthesisEnd event\r\n                _this.debug(\"Event reached : \" + _this.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END);\r\n                _this.triggerEvent(_this.ArtyomGlobalEvents.SPEECH_SYNTHESIS_END);\r\n                // Trigger the onEnd callback if exists.\r\n                if (callbacks) {\r\n                    if (typeof (callbacks.onEnd) == \"function\") {\r\n                        callbacks.onEnd.call(msg);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // Notice how many chunks were processed for the given text.\r\n        this.debug((actualChunk) + \" text chunk processed succesfully out of \" + totalChunks);\r\n        // Important : Save the SpeechSynthesisUtterance object in memory, otherwise it will get lost\r\n        this.ArtyomGarbageCollection.push(msg);\r\n        window.speechSynthesis.speak(msg);\r\n    };\r\n    /**\r\n     * Process the given text into chunks and execute the private function talk\r\n     *\r\n     * @tutorial http://docs.ourcodeworld.com/projects/artyom-js/documentation/methods/say\r\n     * @param {String} message Text to be spoken\r\n     * @param {Object} callbacks\r\n     * @returns {undefined}\r\n     */\r\n    Artyom.prototype.say = function (message, callbacks) {\r\n        var artyom_say_max_chunk_length = 115;\r\n        var _this = this;\r\n        var definitive = [];\r\n        if (this.speechSupported()) {\r\n            if (typeof (message) != 'string') {\r\n                return console.warn(\"Artyom expects a string to speak \" + typeof message + \" given\");\r\n            }\r\n            if (!message.length) {\r\n                return console.warn(\"Cannot speak empty string\");\r\n            }\r\n            // If the providen text is long, proceed to split it\r\n            if (message.length > artyom_say_max_chunk_length) {\r\n                // Split the given text by pause reading characters [\",\",\":\",\";\",\". \"] to provide a natural reading feeling.\r\n                var naturalReading = message.split(/,|:|\\. |;/);\r\n                naturalReading.forEach(function (chunk, index) {\r\n                    // If the sentence is too long and could block the API, split it to prevent any errors.\r\n                    if (chunk.length > artyom_say_max_chunk_length) {\r\n                        // Process the providen string into strings (withing an array) of maximum aprox. 115 characters to prevent any error with the API.\r\n                        var temp_processed = _this.splitStringByChunks(chunk, artyom_say_max_chunk_length);\r\n                        // Add items of the processed sentence into the definitive chunk.\r\n                        definitive.push.apply(definitive, temp_processed);\r\n                    }\r\n                    else {\r\n                        // Otherwise just add the sentence to being spoken.\r\n                        definitive.push(chunk);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                definitive.push(message);\r\n            }\r\n            // Clean any empty item in array\r\n            definitive = definitive.filter(function (e) { return e; });\r\n            // Finally proceed to talk the chunks and assign the callbacks.\r\n            definitive.forEach(function (chunk, index) {\r\n                var numberOfChunk = (index + 1);\r\n                if (chunk) {\r\n                    _this.talk(chunk, numberOfChunk, definitive.length, callbacks);\r\n                }\r\n            });\r\n            // Save the spoken text into the lastSay object of artyom\r\n            _this.ArtyomProperties.helpers.lastSay = {\r\n                text: message,\r\n                date: new Date()\r\n            };\r\n        }\r\n    };\r\n    return Artyom;\r\n}());\r\nexports.default = Artyom;\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import dayjs from 'dayjs';\nimport Artyom from 'artyom.js';\n// import { debounce } from '../helpers/helper-util';\nimport debounce from 'lodash/debounce';\n\n// Create a variable that stores your instance\nconst artyom = new Artyom();\n\nexport default () => {\n  const speech = new p5.Speech();\n\n  function voiceReady() {\n    console.log('voice ready');\n    //console.log(speech.voices);\n    speech.setVoice('Juan');\n    // speech.setPitch(1.5);\n    // speech.setRate(0.8);\n  }\n\n  speech.onLoad = voiceReady;\n\n  speech.started(startSpeaking);\n  speech.ended(endSpeaking);\n\n  function startSpeaking() {\n    console.log('talking', annyang.isListening());\n    if (annyang.isListening()) {\n      annyang.pause();\n    }\n  }\n\n  function endSpeaking() {\n    // while (condition) {\n      \n    // }\n    console.log('speech', speech.synth);\n    console.log('note talking', annyang.isListening());\n    setTimeout(() => {\n      if (!annyang.isListening()) {\n        annyang.resume();\n      }\n      console.log('speech', speech.synth);\n    }, 3000);\n  }\n\n  // const a = \"Jos\";\n\n  function hi(a) {\n    speech.speak(`Hola ${a}`);\n  }\n\n  const loc = () => {\n    alert(\n      \"List of commands-\\n'hello (chuy)': To give greetings\\n'goodbye (chuy)': to tell goodbye\\n'search for *something': to google search'website search *website': to search a Website\\n'repeat *saysome': to repeat what you say\\n'close tab': go back to chuy tab\\n'what is the time': tells the time and daten'tell me a joke': tells a cheesy joke\"\n    )\n  };\n\n  const bye = () => {\n    speech.speak(`Adis ${a}, y que tengas un da muy agradable`);\n  };\n  const search = something => {\n    window.open(`https://www.google.ae/?gfe_rd=cr&ei=08dvWLvzJuHu8AeY9a74Aw#safe=strict&q=${something}`);\n    speech.speak(`Buscando resultados para ${something}`);\n  };\n\n  const searchWebsite = website => {\n    window.open(`https://www.${website}/`);\n    speech.speak(`Abriendo ${website}`);\n  };\n\n  const how = () => {\n    speech.speak(\"Estoy bien. Puedo preguntar cmo ests t?\");\n  };\n\n  const who = () => {\n    speech.speak(`Su nombre es ${a} y eres realmente la mejor persona que he conocido`);\n\n  };\n  const saysome = say => {\n    speech.speak(say);\n  };\n\n  const ctab = () => {\n    open(location, '_self').close();\n    speech.speak(\"pestaa cerrada\");\n  };\n\n  const hour = () => {\n    speech.speak(dayjs().format('[son las] H [horas con] m [minutos]'));\n  };\n\n  const date = () => {\n    speech.speak(dayjs().format('dddd D [de] MMMM [del] YYYY'));\n  };\n\n  // if (annyang) {\n  //   // Let's define a command.\n  //   annyang.setLanguage('es-MX');\n  //   const commands = {\n  //     'commands': loc,\n  //     '(otro) hola (chuy)': hi,\n  //     'adis (chuy)': bye,\n  //     '(chuy) busca *something': search,\n  //     '(chuy) abre *website': searchWebsite,\n  //     'repite *saysome': saysome,\n  //     'cierra la pestaa': ctab,\n  //     'qu hora es': hour,\n  //     'qu fecha es': date,\n  //     // 'cuntame un chiste': joke,\n  //     // 'cuntame otro chiste': anotherjoke,\n  //     '(chuy) cmo ests': how,\n  //     'quin soy yo': who\n  //   };\n  //   // Add our commands to annyang\n  //   annyang.addCommands(commands);\n\n  //   annyang.debug(true);\n\n  //   annyang.addCallback('resultMatch', function(userSaid, commandText, phrases) {\n  //     console.log('resultMatch');\n  //     console.log(userSaid);\n  //     console.log(commandText);\n  //     console.log(phrases);\n  //   });\n\n  //   annyang.addCallback('result', function(userSaid, commandText, phrases) {\n  //     console.log('resultMatch');\n  //     console.log(userSaid);\n  //   });\n\n  //   annyang.start();\n  // }\n\n  // // Add some commandsDemostrations in the normal way\n  // artyom.addCommands([\n  //   {\n  //       indexes: [/hola|Hola/g],\n  //       smart:true,\n  //       action: (i,wildcard) => {\n  //           console.log(i, wildcard)\n  //           artyom.say(\"Dijiste: \"+ wildcard, {\n  //             lang: \"es-MX\",\n  //           });\n  //       }\n  //   },\n  // ]);\n\n  // // Start the commands !\n  // artyom.initialize({\n  //   lang: \"es-MX\", // GreatBritain english\n  //   continuous: true, // Listen forever\n  //   soundex: true,// Use the soundex algorithm to increase accuracy\n  //   debug: true, // Show messages in the console\n  //   // executionKeyword: \"and do it now\",\n  //   listen: true, // Start to listen commands !\n\n  //   // If providen, you can only trigger a command if you say its name\n  //   // e.g to trigger Good Morning, you need to say \"Jarvis Good Morning\"\n  //   // name: \"Jarvis\" \n  // }).then(() => {\n  //   console.log(\"Artyom has been succesfully initialized\");\n  // }).catch((err) => {\n  //   console.error(\"Artyom couldn't be initialized: \", err);\n  // });\n  window.SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\n  let finalTranscript = '';\n  let recognition = new window.SpeechRecognition();\n\n  recognition.interimResults = true;\n  recognition.maxAlternatives = 10;\n  recognition.continuous = true;\n  recognition.lang = \"es-MX\";\n\n  const onSpeech = (speech) => {\n    console.log('speech', speech);\n  }\n\n  const debounced = debounce(onSpeech, 2000);\n\n  recognition.onresult = (event) => {\n    let interimTranscript = '';\n    for (let i = event.resultIndex, len = event.results.length; i < len; i++) {\n      let transcript = event.results[i][0].transcript;\n      if (event.results[i].isFinal) {\n        console.log('isFinal', interimTranscript);\n        debounced(interimTranscript);\n      } else {\n        interimTranscript += transcript;\n      }\n    }\n    debounced(interimTranscript);\n\n    console.log('interimTranscript', interimTranscript);\n  }\n  recognition.start();\n}","// http://mrl.nyu.edu/~perlin/noise/\n\nconst ImprovedNoise = () => {\n  const p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10,\n    23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87,\n    174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211,\n    133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208,\n    89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5,\n    202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119,\n    248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232,\n    178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249,\n    14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205,\n    93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\n\n  for (let i = 0; i < 256; i++) {\n\n    p[256 + i] = p[i];\n\n  }\n\n  function fade(t) {\n\n    return t * t * t * (t * (t * 6 - 15) + 10);\n\n  }\n\n  function lerp(t, a, b) {\n\n    return a + t * (b - a);\n\n  }\n\n  function grad(hash, x, y, z) {\n    const h = hash & 15;\n    const u = h < 8 ? x : y;\n    const v = h < 4 ? y : h == 12 || h == 14 ? x : z;\n    return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\n  }\n\n  return {\n\n    noise(x, y, z) {\n      const floorX = ~~x;\n      const floorY = ~~y;\n      const floorZ = ~~z;\n      const X = floorX & 255;\n      const Y = floorY & 255;\n      const Z = floorZ & 255;\n\n      x -= floorX;\n      y -= floorY;\n      z -= floorZ;\n\n      const xMinus1 = x - 1;\n      const yMinus1 = y - 1;\n      const zMinus1 = z - 1;\n      const u = fade(x);\n      const v = fade(y);\n      const w = fade(z);\n      const A = p[X] + Y;\n      const AA = p[A] + Z;\n      const AB = p[A + 1] + Z;\n      const B = p[X + 1] + Y;\n      const BA = p[B] + Z;\n      const BB = p[B + 1] + Z;\n\n      return lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z),\n        grad(p[BA], xMinus1, y, z)),\n        lerp(u, grad(p[AB], x, yMinus1, z),\n          grad(p[BB], xMinus1, yMinus1, z))),\n        lerp(v, lerp(u, grad(p[AA + 1], x, y, zMinus1),\n          grad(p[BA + 1], xMinus1, y, z - 1)),\n          lerp(u, grad(p[AB + 1], x, yMinus1, zMinus1),\n            grad(p[BB + 1], xMinus1, yMinus1, zMinus1))));\n    }\n  };\n};\n\nexport default ImprovedNoise;\n","import ImprovedNoise from './improvedNoise';\n\nconst LoopVisualizer = (scene, analyser, mic) => {\n  const RINGCOUNT = 60;\n  const SEPARATION = 30;\n  const INIT_RADIUS = 50;\n  const SEGMENTS = 512;\n  const VOL_SENS = 2;\n  const BIN_COUNT = 512;\n\n  let rings = [];\n  let geoms;\n  let materials = [];\n\n  let levels = [];\n  //var waves = [];\n  let colors = [];\n\n  const loopHolder = new THREE.Object3D();\n  const perlin = new ImprovedNoise();\n  let noisePos = 0;\n  let freqByteData;\n  let timeByteData;\n\n  let loopGeom;//one geom for all rings\n\n\n  function init() {\n\n    rings = [];\n    geoms = [];\n    materials = [];\n    levels = [];\n    //waves = [];\n    colors = [];\n\n    ////////INIT audio in\n    freqByteData = new Uint8Array(BIN_COUNT);\n    timeByteData = new Uint8Array(BIN_COUNT);\n\n    scene.add(loopHolder);\n\n    let scale = 1;\n    const alt = 0;\n\n    const circleShape = new THREE.Shape();\n    circleShape.absarc(0, 0, INIT_RADIUS, 0, Math.PI * 2, false);\n    //createPointsGeometry returns (SEGMENTS * 2 )+ 1 points\n    loopGeom = circleShape.createPointsGeometry(SEGMENTS / 2);\n    loopGeom.dynamic = true;\n\n    //create rings\n    for (let i = 0; i < RINGCOUNT; i++) {\n\n      const m = new THREE.LineBasicMaterial({\n        color: 0xffffff,\n        linewidth: 1,\n        opacity: 1,\n        blending: THREE.AdditiveBlending,\n        //depthTest : false,\n        transparent: true\n\n      });\n\n      const line = new THREE.Line(loopGeom, m);\n\n      rings.push(line);\n      //geoms.push(geom);\n      materials.push(m);\n      scale *= 1.02;\n      line.scale.x = scale;\n      line.scale.y = scale;\n\n      loopHolder.add(line);\n\n      levels.push(0);\n      //waves.push(emptyBinData);\n      colors.push(0);\n\n      //rings\n      //if (Math.floor(i /20) % 2 == 0 ){\n      // /line.visible = false;\n      // /}\n\n    }\n\n\n\n\n  }\n\n  function remove() {\n\n    if (loopHolder) {\n      for (let i = 0; i < RINGCOUNT; i++) {\n        loopHolder.remove(rings[i]);\n      }\n\n    }\n  }\n\n  function update() {\n\n    //analyser.smoothingTimeConstant = 0.1;\n    analyser.getByteFrequencyData(freqByteData);\n    analyser.getByteTimeDomainData(timeByteData);\n\n    //get average level\n    let sum = 0;\n    for (var i = 0; i < BIN_COUNT; i++) {\n      sum += freqByteData[i];\n    }\n    const aveLevel = sum / BIN_COUNT;\n    // console.log('aveLevel', aveLevel);\n    const scaled_average = (aveLevel / 256) * VOL_SENS; //256 is the highest a level can be\n    // console.log('scaled_average', scaled_average * 2);\n    const aveOffset = mic ? 2 : 1;\n    levels.push(scaled_average * aveOffset);\n    // levels.push(scaled_average);\n    \n    //read waveform into timeByteData\n    //waves.push(timeByteData);\n\n    //get noise color posn\n    noisePos += 0.005;\n    const n = Math.abs(perlin.noise(noisePos, 0, 0));\n    colors.push(n);\n\n    levels.shift(1);\n    //waves.shift(1);\n    colors.shift(1);\n\n\n    //write current waveform into all rings\n    for (let j = 0; j < SEGMENTS; j++) {\n      loopGeom.vertices[j].z = (timeByteData[j] - 128);//stretch by 2\n    }\n    // link up last segment\n    loopGeom.vertices[SEGMENTS].z = loopGeom.vertices[0].z;\n    loopGeom.verticesNeedUpdate = true;\n\n\n    //for( i = RINGCOUNT-1; i > 0 ; i--) {\n\n    for (i = 0; i < RINGCOUNT; i++) {\n\n      const ringId = RINGCOUNT - i - 1;\n\n\n      const offset = mic ? 0.3 : 0.01;\n      const normLevel = levels[ringId] + offset; //avoid scaling by 0\n      // console.log(normLevel);\n      const hue = colors[i];\n\n      materials[i].color.setHSL(hue, 1, normLevel);\n      materials[i].linewidth = normLevel * 3;\n      materials[i].opacity = normLevel; //fadeout\n      rings[i].scale.z = normLevel / 3;\n    }\n\n    //auto tilt\n    // loopHolder.rotation.x = perlin.noise(noisePos * .5, 0,0) * Math.PI*.6;\n    // loopHolder.rotation.y = perlin.noise(noisePos * .5,10,0) * Math.PI*.6;\n\n\n  }\n\n  return {\n    init,\n    update,\n    remove,\n    loopHolder\n  };\n};\n\nexport default LoopVisualizer;","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"shifty\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shifty\"] = factory();\n\telse\n\t\troot[\"shifty\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import * as easingFunctions from './easing-functions';\n\n// CONSTANTS\nconst DEFAULT_EASING = 'linear';\nconst DEFAULT_DURATION = 500;\nconst UPDATE_TIME = 1000 / 60;\nconst root = typeof window !== 'undefined' ? window : global;\n\nconst AFTER_TWEEN = 'afterTween';\nconst AFTER_TWEEN_END = 'afterTweenEnd';\nconst BEFORE_TWEEN = 'beforeTween';\nconst TWEEN_CREATED = 'tweenCreated';\nconst TYPE_FUNCTION = 'function';\nconst TYPE_STRING = 'string';\n\n// requestAnimationFrame() shim by Paul Irish (modified for Shifty)\n// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\nlet scheduleFunction =\n  root.requestAnimationFrame ||\n  root.webkitRequestAnimationFrame ||\n  root.oRequestAnimationFrame ||\n  root.msRequestAnimationFrame ||\n  (root.mozCancelRequestAnimationFrame && root.mozRequestAnimationFrame) ||\n  setTimeout;\n\nconst noop = () => {};\n\nlet listHead = null;\nlet listTail = null;\n\n// Strictly used for testing\nexport const resetList = () => (listHead = listTail = null);\nexport const getListHead = () => listHead;\nexport const getListTail = () => listTail;\n\nconst formulas = { ...easingFunctions };\n\n/**\n * Calculates the interpolated tween values of an Object for a given\n * timestamp.\n * @param {number} forPosition The position to compute the state for.\n * @param {Object} currentState Current state properties.\n * @param {Object} originalState: The original state properties the Object is\n * tweening from.\n * @param {Object} targetState: The destination state properties the Object\n * is tweening to.\n * @param {number} duration: The length of the tween in milliseconds.\n * @param {number} timestamp: The UNIX epoch time at which the tween began.\n * @param {Object<string|Function>} easing: This Object's keys must correspond\n * to the keys in targetState.\n * @returns {Object}\n * @private\n */\nexport const tweenProps = (\n  forPosition,\n  currentState,\n  originalState,\n  targetState,\n  duration,\n  timestamp,\n  easing\n) => {\n  const normalizedPosition =\n    forPosition < timestamp ? 0 : (forPosition - timestamp) / duration;\n\n  for (const key in currentState) {\n    const easingObjectProp = easing[key];\n    const easingFn = easingObjectProp.call\n      ? easingObjectProp\n      : formulas[easingObjectProp];\n\n    const start = originalState[key];\n\n    currentState[key] =\n      start + (targetState[key] - start) * easingFn(normalizedPosition);\n  }\n\n  return currentState;\n};\n\nconst processTween = (tween, currentTime) => {\n  const { _attachment, _currentState, _delay, _easing, _originalState } = tween;\n  let { _duration, _step, _targetState, _timestamp } = tween;\n\n  const endTime = _timestamp + _delay + _duration;\n  let timeToCompute = currentTime > endTime ? endTime : currentTime;\n  const hasEnded = timeToCompute >= endTime;\n  const offset = _duration - (endTime - timeToCompute);\n\n  if (hasEnded) {\n    _step(_targetState, _attachment, offset);\n    tween.stop(true);\n  } else {\n    tween._applyFilter(BEFORE_TWEEN);\n\n    // If the animation has not yet reached the start point (e.g., there was\n    // delay that has not yet completed), just interpolate the starting\n    // position of the tween.\n    if (timeToCompute < _timestamp + _delay) {\n      timeToCompute = 1;\n      _duration = 1;\n      _timestamp = 1;\n    } else {\n      _timestamp += _delay;\n    }\n\n    tweenProps(\n      timeToCompute,\n      _currentState,\n      _originalState,\n      _targetState,\n      _duration,\n      _timestamp,\n      _easing\n    );\n\n    tween._applyFilter(AFTER_TWEEN);\n    _step(_currentState, _attachment, offset);\n  }\n};\n\n/**\n * Process all tweens currently managed by Shifty for the current tick. This\n * does not perform any timing or update scheduling; it is the logic that is\n * run *by* the scheduling functionality. Specifically, it computes the state\n * and calls all of the relevant {@link shifty.tweenConfig} functions supplied\n * to each of the tweens for the current point in time (as determined by {@link\n * shifty.Tweenable.now}.\n *\n * This is a low-level API that won't be needed in the majority of situations.\n * It is primarily useful as a hook for higher-level animation systems that are\n * built on top of Shifty. If you need this function, it is likely you need to\n * pass something like `() => {}` to {@link\n * shifty.Tweenable.setScheduleFunction}, override {@link shifty.Tweenable.now}\n * and manage the scheduling logic yourself.\n *\n * @method shifty.processTweens\n * @see https://github.com/jeremyckahn/shifty/issues/109\n */\nexport const processTweens = () => {\n  const currentTime = Tweenable.now();\n  let tween = listHead;\n\n  while (tween) {\n    const nextTween = tween._next;\n    processTween(tween, currentTime);\n    tween = nextTween;\n  }\n};\n\n/**\n * Handles the update logic for one step of a tween.\n * @param {number} [currentTimeOverride] Needed for accurate timestamp in\n * shifty.Tweenable#seek.\n * @private\n */\nexport const scheduleUpdate = () => {\n  if (!listHead) {\n    return;\n  }\n\n  scheduleFunction.call(root, scheduleUpdate, UPDATE_TIME);\n\n  processTweens();\n};\n\n/**\n * Creates a usable easing Object from a string, a function or another easing\n * Object.  If `easing` is an Object, then this function clones it and fills\n * in the missing properties with `\"linear\"`.\n * @param {Object.<string|Function>} fromTweenParams\n * @param {Object|string|Function} easing\n * @return {Object.<string|Function>}\n * @private\n */\nexport const composeEasingObject = (\n  fromTweenParams,\n  easing = DEFAULT_EASING\n) => {\n  const composedEasing = {};\n  let typeofEasing = typeof easing;\n\n  if (typeofEasing === TYPE_STRING || typeofEasing === TYPE_FUNCTION) {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing;\n    }\n  } else {\n    for (const prop in fromTweenParams) {\n      composedEasing[prop] = easing[prop] || DEFAULT_EASING;\n    }\n  }\n\n  return composedEasing;\n};\n\nconst remove = tween => {\n  // Adapted from:\n  // https://github.com/trekhleb/javascript-algorithms/blob/7c9601df3e8ca4206d419ce50b88bd13ff39deb6/src/data-structures/doubly-linked-list/DoublyLinkedList.js#L73-L121\n  if (tween === listHead) {\n    listHead = tween._next;\n\n    if (listHead) {\n      listHead._previous = null;\n    } else {\n      listTail = null;\n    }\n  } else if (tween === listTail) {\n    listTail = tween._previous;\n\n    if (listTail) {\n      listTail._next = null;\n    } else {\n      listHead = null;\n    }\n  } else {\n    const previousTween = tween._previous;\n    const nextTween = tween._next;\n\n    previousTween._next = nextTween;\n    nextTween._previous = previousTween;\n  }\n\n  // Clean up any references in case the tween is restarted later.\n  tween._previous = tween._next = null;\n};\n\nexport class Tweenable {\n  /**\n   * @param {Object} [initialState={}] The values that the initial tween should\n   * start at if a `from` value is not provided to {@link\n   * shifty.Tweenable#tween} or {@link shifty.Tweenable#setConfig}.\n   * @param {shifty.tweenConfig} [config] Configuration object to be passed to\n   * {@link shifty.Tweenable#setConfig}.\n   * @constructs shifty.Tweenable\n   */\n  constructor(initialState = {}, config = undefined) {\n    this._currentState = initialState;\n    this._configured = false;\n    this._filters = [];\n    this._timestamp = null;\n    this._next = null;\n    this._previous = null;\n\n    // To prevent unnecessary calls to setConfig do not set default\n    // configuration here.  Only set default configuration immediately before\n    // tweening if none has been set.\n    if (config) {\n      this.setConfig(config);\n    }\n  }\n\n  /**\n   * Applies a filter to Tweenable instance.\n   * @param {string} filterName The name of the filter to apply.\n   * @private\n   */\n  _applyFilter(filterName) {\n    for (const filterType of this._filters) {\n      const filter = filterType[filterName];\n\n      if (filter) {\n        filter(this);\n      }\n    }\n  }\n\n  /**\n   * Configure and start a tween.\n   * @method shifty.Tweenable#tween\n   * @param {shifty.tweenConfig} [config] Gets passed to {@link\n   * shifty.Tweenable#setConfig}.\n   * @return {external:Promise}\n   */\n  tween(config = undefined) {\n    const { _attachment, _configured } = this;\n\n    // Only set default config if no configuration has been set previously and\n    // none is provided now.\n    if (config || !_configured) {\n      this.setConfig(config);\n    }\n\n    this._pausedAtTime = null;\n    this._timestamp = Tweenable.now();\n    this._start(this.get(), _attachment);\n    return this.resume();\n  }\n\n  /**\n   * Configure a tween that will start at some point in the future.\n   * @method shifty.Tweenable#setConfig\n   * @param {shifty.tweenConfig} [config={}]\n   * @return {shifty.Tweenable}\n   */\n  setConfig({\n    attachment,\n    delay = 0,\n    duration = DEFAULT_DURATION,\n    easing,\n    from,\n    promise = Promise,\n    start = noop,\n    step = noop,\n    to,\n  } = {}) {\n    this._configured = true;\n\n    // Attach something to this Tweenable instance (e.g.: a DOM element, an\n    // object, a string, etc.);\n    this._attachment = attachment;\n\n    // Init the internal state\n    this._isPlaying = false;\n    this._pausedAtTime = null;\n    this._scheduleId = null;\n    this._delay = delay;\n    this._start = start;\n    this._step = step;\n    this._duration = duration;\n    this._currentState = { ...(from || this.get()) };\n    this._originalState = this.get();\n    this._targetState = { ...(to || this.get()) };\n\n    const { _currentState } = this;\n    // Ensure that there is always something to tween to.\n    this._targetState = { ..._currentState, ...this._targetState };\n\n    this._easing = composeEasingObject(_currentState, easing);\n\n    const { filters } = Tweenable;\n    this._filters.length = 0;\n\n    for (const name in filters) {\n      if (filters[name].doesApply(this)) {\n        this._filters.push(filters[name]);\n      }\n    }\n\n    this._applyFilter(TWEEN_CREATED);\n\n    this._promise = new promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n\n    // Needed to silence (harmless) logged errors when a .catch handler is not\n    // added by downstream code\n    this._promise.catch(noop);\n\n    return this;\n  }\n\n  /**\n   * @method shifty.Tweenable#get\n   * @return {Object} The current state.\n   */\n  get() {\n    return { ...this._currentState };\n  }\n\n  /**\n   * Set the current state.\n   * @method shifty.Tweenable#set\n   * @param {Object} state The state to set.\n   */\n  set(state) {\n    this._currentState = state;\n  }\n\n  /**\n   * Pause a tween. Paused tweens can be resumed from the point at which they\n   * were paused. If a tween is not running, this is a no-op.\n   * @method shifty.Tweenable#pause\n   * @return {shifty.Tweenable}\n   */\n  pause() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._pausedAtTime = Tweenable.now();\n    this._isPlaying = false;\n    remove(this);\n\n    return this;\n  }\n\n  /**\n   * Resume a paused tween.\n   * @method shifty.Tweenable#resume\n   * @return {external:Promise}\n   */\n  resume() {\n    if (this._timestamp === null) {\n      return this.tween();\n    }\n\n    if (this._isPlaying) {\n      return this._promise;\n    }\n\n    const currentTime = Tweenable.now();\n\n    if (this._pausedAtTime) {\n      this._timestamp += currentTime - this._pausedAtTime;\n      this._pausedAtTime = null;\n    }\n\n    this._isPlaying = true;\n\n    if (listHead === null) {\n      listHead = this;\n      listTail = this;\n      scheduleUpdate();\n    } else {\n      this._previous = listTail;\n      listTail._next = this;\n\n      listTail = this;\n    }\n\n    return this._promise;\n  }\n\n  /**\n   * Move the state of the animation to a specific point in the tween's\n   * timeline.  If the animation is not running, this will cause {@link\n   * shifty.stepFunction} handlers to be called.\n   * @method shifty.Tweenable#seek\n   * @param {millisecond} millisecond The millisecond of the animation to seek\n   * to.  This must not be less than `0`.\n   * @return {shifty.Tweenable}\n   */\n  seek(millisecond) {\n    millisecond = Math.max(millisecond, 0);\n    const currentTime = Tweenable.now();\n\n    if (this._timestamp + millisecond === 0) {\n      return this;\n    }\n\n    this._timestamp = currentTime - millisecond;\n\n    if (!this._isPlaying) {\n      // If the animation is not running, call processTween to make sure that\n      // any step handlers are run.\n      processTween(this, currentTime);\n    }\n\n    return this;\n  }\n\n  /**\n   * Stops and cancels a tween. If a tween is not running, this is a no-op.\n   * @param {boolean} [gotoEnd] If `false`, the tween just stops at its current\n   * state, and the tween promise is not resolved.  If `true`, the tweened\n   * object's values are instantly set to the target values, and the promise is\n   * resolved.\n   * @method shifty.Tweenable#stop\n   * @return {shifty.Tweenable}\n   */\n  stop(gotoEnd = false) {\n    const {\n      _attachment,\n      _currentState,\n      _easing,\n      _originalState,\n      _targetState,\n    } = this;\n\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPlaying = false;\n\n    remove(this);\n\n    if (gotoEnd) {\n      this._applyFilter(BEFORE_TWEEN);\n      tweenProps(1, _currentState, _originalState, _targetState, 1, 0, _easing);\n      this._applyFilter(AFTER_TWEEN);\n      this._applyFilter(AFTER_TWEEN_END);\n      this._resolve(_currentState, _attachment);\n    } else {\n      this._reject(_currentState, _attachment);\n    }\n\n    return this;\n  }\n\n  /**\n   * Whether or not a tween is running.\n   * @method shifty.Tweenable#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this._isPlaying;\n  }\n\n  /**\n   * @method shifty.Tweenable#setScheduleFunction\n   * @param {shifty.scheduleFunction} scheduleFunction\n   * @deprecated Will be removed in favor of {@link shifty.Tweenable.setScheduleFunction} in 3.0.\n   */\n  setScheduleFunction(scheduleFunction) {\n    Tweenable.setScheduleFunction(scheduleFunction);\n  }\n\n  /**\n   * `delete` all \"own\" properties.  Call this when the {@link\n   * shifty.Tweenable} instance is no longer needed to free memory.\n   * @method shifty.Tweenable#dispose\n   */\n  dispose() {\n    for (const prop in this) {\n      delete this[prop];\n    }\n  }\n}\n\n/**\n * Set a custom schedule function.\n *\n * By default,\n * [`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)\n * is used if available, otherwise\n * [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout)\n * is used.\n * @method shifty.Tweenable.setScheduleFunction\n * @param {shifty.scheduleFunction} fn The function to be\n * used to schedule the next frame to be rendered.\n * @return {shifty.scheduleFunction} The function that was set.\n */\nTweenable.setScheduleFunction = fn => (scheduleFunction = fn);\n\nTweenable.formulas = formulas;\n\n/**\n * The {@link shifty.filter}s available for use.  These filters are\n * automatically applied at tween-time by Shifty. You can define your own\n * {@link shifty.filter}s and attach them to this object.\n * @member shifty.Tweenable.filters\n * @type {Object.<shifty.filter>}\n */\nTweenable.filters = {};\n\n/**\n * @method shifty.Tweenable.now\n * @static\n * @returns {number} The current timestamp.\n */\nTweenable.now = Date.now || (() => +new Date());\n\n/**\n * @method shifty.tween\n * @param {shifty.tweenConfig} [config={}]\n * @description Standalone convenience method that functions identically to\n * {@link shifty.Tweenable#tween}.  You can use this to create tweens without\n * needing to set up a {@link shifty.Tweenable} instance.\n *\n *     import { tween } from 'shifty';\n *\n *     tween({ from: { x: 0 }, to: { x: 10 } }).then(\n *       () => console.log('All done!')\n *     );\n *\n * @returns {external:Promise}\n */\nexport function tween(config = {}) {\n  const tweenable = new Tweenable();\n  const promise = tweenable.tween(config);\n  promise.tweenable = tweenable;\n\n  return promise;\n}\n","/*!\n * All equations are adapted from Thomas Fuchs'\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js).\n *\n * Based on Easing Equations (c) 2003 [Robert\n * Penner](http://www.robertpenner.com/), all rights reserved. This work is\n * [subject to terms](http://www.robertpenner.com/easing_terms_of_use.html).\n */\n\n/*!\n *  TERMS OF USE - EASING EQUATIONS\n *  Open source under the BSD License.\n *  Easing Equations (c) 2003 Robert Penner, all rights reserved.\n */\n\n/**\n * @member shifty.Tweenable.formulas\n * @description A static Object of {@link shifty.easingFunction}s that can by\n * used by Shifty. The default values are defined in\n * [`easing-functions.js`](easing-functions.js.html), but you can add your own\n * {@link shifty.easingFunction}s by defining them as keys to this Object.\n *\n * Shifty ships with an implementation of [Robert Penner's easing\n * equations](http://robertpenner.com/easing/), as adapted from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/penner.js)'s\n * implementation.\n * <p data-height=\"934\" data-theme-id=\"0\" data-slug-hash=\"wqObdO\"\n * data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-embed-version=\"2\"\n * data-pen-title=\"Shifty - Easing formula names\" class=\"codepen\">See the Pen <a\n * href=\"https://codepen.io/jeremyckahn/pen/wqObdO/\">Shifty - Easing formula\n * names</a> by Jeremy Kahn (<a\n * href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>) on <a\n * href=\"https://codepen.io\">CodePen</a>.</p>\n * <script async\n * src=\"https://production-assets.codepen.io/assets/embed/ei.js\"></script>\n * @type {Object.<shifty.easingFunction>}\n * @static\n */\n\nexport const linear = pos => pos;\n\nexport const easeInQuad = pos => Math.pow(pos, 2);\n\nexport const easeOutQuad = pos => -(Math.pow(pos - 1, 2) - 1);\n\nexport const easeInOutQuad = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 2) : -0.5 * ((pos -= 2) * pos - 2);\n\nexport const easeInCubic = pos => Math.pow(pos, 3);\n\nexport const easeOutCubic = pos => Math.pow(pos - 1, 3) + 1;\n\nexport const easeInOutCubic = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 3) : 0.5 * (Math.pow(pos - 2, 3) + 2);\n\nexport const easeInQuart = pos => Math.pow(pos, 4);\n\nexport const easeOutQuart = pos => -(Math.pow(pos - 1, 4) - 1);\n\nexport const easeInOutQuart = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\n\nexport const easeInQuint = pos => Math.pow(pos, 5);\n\nexport const easeOutQuint = pos => Math.pow(pos - 1, 5) + 1;\n\nexport const easeInOutQuint = pos =>\n  (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 5) : 0.5 * (Math.pow(pos - 2, 5) + 2);\n\nexport const easeInSine = pos => -Math.cos(pos * (Math.PI / 2)) + 1;\n\nexport const easeOutSine = pos => Math.sin(pos * (Math.PI / 2));\n\nexport const easeInOutSine = pos => -0.5 * (Math.cos(Math.PI * pos) - 1);\n\nexport const easeInExpo = pos => (pos === 0 ? 0 : Math.pow(2, 10 * (pos - 1)));\n\nexport const easeOutExpo = pos => (pos === 1 ? 1 : -Math.pow(2, -10 * pos) + 1);\n\nexport const easeInOutExpo = pos => {\n  if (pos === 0) {\n    return 0;\n  }\n\n  if (pos === 1) {\n    return 1;\n  }\n\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * Math.pow(2, 10 * (pos - 1));\n  }\n\n  return 0.5 * (-Math.pow(2, -10 * --pos) + 2);\n};\n\nexport const easeInCirc = pos => -(Math.sqrt(1 - pos * pos) - 1);\n\nexport const easeOutCirc = pos => Math.sqrt(1 - Math.pow(pos - 1, 2));\n\nexport const easeInOutCirc = pos =>\n  (pos /= 0.5) < 1\n    ? -0.5 * (Math.sqrt(1 - pos * pos) - 1)\n    : 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);\n\nexport const easeOutBounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos;\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75;\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375;\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;\n  }\n};\n\nexport const easeInBack = pos => {\n  const s = 1.70158;\n  return pos * pos * ((s + 1) * pos - s);\n};\n\nexport const easeOutBack = pos => {\n  const s = 1.70158;\n  return (pos = pos - 1) * pos * ((s + 1) * pos + s) + 1;\n};\n\nexport const easeInOutBack = pos => {\n  let s = 1.70158;\n  if ((pos /= 0.5) < 1) {\n    return 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s));\n  }\n  return 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2);\n};\n\nexport const elastic = pos =>\n  -1 * Math.pow(4, -8 * pos) * Math.sin(((pos * 6 - 1) * (2 * Math.PI)) / 2) +\n  1;\n\nexport const swingFromTo = pos => {\n  let s = 1.70158;\n  return (pos /= 0.5) < 1\n    ? 0.5 * (pos * pos * (((s *= 1.525) + 1) * pos - s))\n    : 0.5 * ((pos -= 2) * pos * (((s *= 1.525) + 1) * pos + s) + 2);\n};\n\nexport const swingFrom = pos => {\n  const s = 1.70158;\n  return pos * pos * ((s + 1) * pos - s);\n};\n\nexport const swingTo = pos => {\n  const s = 1.70158;\n  return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;\n};\n\nexport const bounce = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos;\n  } else if (pos < 2 / 2.75) {\n    return 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75;\n  } else if (pos < 2.5 / 2.75) {\n    return 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375;\n  } else {\n    return 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;\n  }\n};\n\nexport const bouncePast = pos => {\n  if (pos < 1 / 2.75) {\n    return 7.5625 * pos * pos;\n  } else if (pos < 2 / 2.75) {\n    return 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75);\n  } else if (pos < 2.5 / 2.75) {\n    return 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375);\n  } else {\n    return 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375);\n  }\n};\n\nexport const easeFromTo = pos =>\n  (pos /= 0.5) < 1\n    ? 0.5 * Math.pow(pos, 4)\n    : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);\n\nexport const easeFrom = pos => Math.pow(pos, 4);\n\nexport const easeTo = pos => Math.pow(pos, 0.25);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const R_NUMBER_COMPONENT = /(\\d|-|\\.)/;\nconst R_FORMAT_CHUNKS = /([^\\-0-9.]+)/g;\nconst R_UNFORMATTED_VALUES = /[0-9.-]+/g;\nconst R_RGB = (() => {\n  const number = R_UNFORMATTED_VALUES.source;\n  const comma = /,\\s*/.source;\n\n  return new RegExp(\n    `rgb\\\\(${number}${comma}${number}${comma}${number}\\\\)`,\n    'g'\n  );\n})();\nconst R_RGB_PREFIX = /^.*\\(/;\nconst R_HEX = /#([0-9]|[a-f]){3,6}/gi;\nconst VALUE_PLACEHOLDER = 'VAL';\n\n// HELPERS\n\n/**\n * @param {Array.number} rawValues\n * @param {string} prefix\n *\n * @return {Array.<string>}\n * @private\n */\nconst getFormatChunksFrom = (rawValues, prefix) =>\n  rawValues.map((val, i) => `_${prefix}_${i}`);\n\n/**\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst getFormatStringFrom = formattedString => {\n  let chunks = formattedString.match(R_FORMAT_CHUNKS);\n\n  if (!chunks) {\n    // chunks will be null if there were no tokens to parse in\n    // formattedString (for example, if formattedString is '2').  Coerce\n    // chunks to be useful here.\n    chunks = ['', ''];\n\n    // If there is only one chunk, assume that the string is a number\n    // followed by a token...\n    // NOTE: This may be an unwise assumption.\n  } else if (\n    chunks.length === 1 ||\n    // ...or if the string starts with a number component (\".\", \"-\", or a\n    // digit)...\n    formattedString.charAt(0).match(R_NUMBER_COMPONENT)\n  ) {\n    // ...prepend an empty string here to make sure that the formatted number\n    // is properly replaced by VALUE_PLACEHOLDER\n    chunks.unshift('');\n  }\n\n  return chunks.join(VALUE_PLACEHOLDER);\n};\n\n/**\n * Convert a base-16 number to base-10.\n *\n * @param {number|string} hex The value to convert.\n *\n * @returns {number} The base-10 equivalent of `hex`.\n * @private\n */\nfunction hexToDec(hex) {\n  return parseInt(hex, 16);\n}\n\n/**\n * Convert a hexadecimal string to an array with three items, one each for\n * the red, blue, and green decimal values.\n *\n * @param {string} hex A hexadecimal string.\n *\n * @returns {Array.<number>} The converted Array of RGB values if `hex` is a\n * valid string, or an Array of three 0's.\n * @private\n */\nconst hexToRGBArray = hex => {\n  hex = hex.replace(/#/, '');\n\n  // If the string is a shorthand three digit hex notation, normalize it to\n  // the standard six digit notation\n  if (hex.length === 3) {\n    hex = hex.split('');\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  }\n\n  return [\n    hexToDec(hex.substr(0, 2)),\n    hexToDec(hex.substr(2, 2)),\n    hexToDec(hex.substr(4, 2)),\n  ];\n};\n\n/**\n * @param {string} hexString\n *\n * @return {string}\n * @private\n */\nconst convertHexToRGB = hexString =>\n  `rgb(${hexToRGBArray(hexString).join(',')})`;\n\n/**\n * TODO: Can this be rewritten to leverage String#replace more efficiently?\n * Runs a filter operation on all chunks of a string that match a RegExp.\n *\n * @param {RegExp} pattern\n * @param {string} unfilteredString\n * @param {function(string)} filter\n *\n * @return {string}\n * @private\n */\nconst filterStringChunks = (pattern, unfilteredString, filter) => {\n  const patternMatches = unfilteredString.match(pattern);\n  let filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);\n\n  if (patternMatches) {\n    patternMatches.forEach(\n      match =>\n        (filteredString = filteredString.replace(\n          VALUE_PLACEHOLDER,\n          filter(match)\n        ))\n    );\n  }\n\n  return filteredString;\n};\n\n/**\n * @param {string} str\n *\n * @return {string}\n * @private\n */\nconst sanitizeHexChunksToRGB = str =>\n  filterStringChunks(R_HEX, str, convertHexToRGB);\n\n/**\n * Convert all hex color values within a string to an rgb string.\n *\n * @param {Object} stateObject\n * @private\n */\nconst sanitizeObjectForHexProps = stateObject => {\n  for (const prop in stateObject) {\n    const currentProp = stateObject[prop];\n\n    if (typeof currentProp === 'string' && currentProp.match(R_HEX)) {\n      stateObject[prop] = sanitizeHexChunksToRGB(currentProp);\n    }\n  }\n};\n\n/**\n * @param {string} rgbChunk\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBChunk = rgbChunk => {\n  const numbers = rgbChunk.match(R_UNFORMATTED_VALUES).map(Math.floor);\n  const prefix = rgbChunk.match(R_RGB_PREFIX)[0];\n\n  return `${prefix}${numbers.join(',')})`;\n};\n\n/**\n * Check for floating point values within rgb strings and round them.\n *\n * @param {string} formattedString\n *\n * @return {string}\n * @private\n */\nconst sanitizeRGBChunks = formattedString =>\n  filterStringChunks(R_RGB, formattedString, sanitizeRGBChunk);\n\n/**\n * Note: It's the duty of the caller to convert the Array elements of the\n * return value into numbers.  This is a performance optimization.\n *\n * @param {string} formattedString\n *\n * @return {Array.<string>|null}\n * @private\n */\nconst getValuesFrom = formattedString =>\n  formattedString.match(R_UNFORMATTED_VALUES);\n\n/**\n * @param {Object} stateObject\n *\n * @return {Object} An Object of formatSignatures that correspond to\n * the string properties of stateObject.\n * @private\n */\nconst getFormatSignatures = stateObject => {\n  const signatures = {};\n\n  for (const propertyName in stateObject) {\n    const property = stateObject[propertyName];\n\n    if (typeof property === 'string') {\n      signatures[propertyName] = {\n        formatString: getFormatStringFrom(property),\n        chunkNames: getFormatChunksFrom(getValuesFrom(property), propertyName),\n      };\n    }\n  }\n\n  return signatures;\n};\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst expandFormattedProperties = (stateObject, formatSignatures) => {\n  for (const propertyName in formatSignatures) {\n    getValuesFrom(stateObject[propertyName]).forEach(\n      (number, i) =>\n        (stateObject[formatSignatures[propertyName].chunkNames[i]] = +number)\n    );\n\n    delete stateObject[propertyName];\n  }\n};\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Object} The extracted value chunks.\n * @private\n */\nconst extractPropertyChunks = (stateObject, chunkNames) => {\n  const extractedValues = {};\n\n  chunkNames.forEach(chunkName => {\n    extractedValues[chunkName] = stateObject[chunkName];\n    delete stateObject[chunkName];\n  });\n\n  return extractedValues;\n};\n\n/**\n * @param {Object} stateObject\n * @param {Array.<string>} chunkNames\n *\n * @return {Array.<number>}\n * @private\n */\nconst getValuesList = (stateObject, chunkNames) =>\n  chunkNames.map(chunkName => stateObject[chunkName]);\n\n/**\n * @param {string} formatString\n * @param {Array.<number>} rawValues\n *\n * @return {string}\n * @private\n */\nconst getFormattedValues = (formatString, rawValues) => {\n  rawValues.forEach(\n    rawValue =>\n      (formatString = formatString.replace(\n        VALUE_PLACEHOLDER,\n        +rawValue.toFixed(4)\n      ))\n  );\n\n  return formatString;\n};\n\n/**\n * @param {Object} stateObject\n * @param {Object} formatSignatures\n * @private\n */\nconst collapseFormattedProperties = (stateObject, formatSignatures) => {\n  for (const prop in formatSignatures) {\n    const { chunkNames, formatString } = formatSignatures[prop];\n\n    const currentProp = getFormattedValues(\n      formatString,\n      getValuesList(extractPropertyChunks(stateObject, chunkNames), chunkNames)\n    );\n\n    stateObject[prop] = sanitizeRGBChunks(currentProp);\n  }\n};\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst expandEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop];\n    const easing = easingObject[prop];\n\n    if (typeof easing === 'string') {\n      const easingNames = easing.split(' ');\n      const defaultEasing = easingNames[easingNames.length - 1];\n\n      chunkNames.forEach(\n        (chunkName, i) =>\n          (easingObject[chunkName] = easingNames[i] || defaultEasing)\n      );\n    } else {\n      // easing is a function\n      chunkNames.forEach(chunkName => (easingObject[chunkName] = easing));\n    }\n\n    delete easingObject[prop];\n  }\n};\n\n/**\n * @param {Object} easingObject\n * @param {Object} tokenData\n * @private\n */\nconst collapseEasingObject = (easingObject, tokenData) => {\n  for (const prop in tokenData) {\n    const { chunkNames } = tokenData[prop];\n    const firstEasing = easingObject[chunkNames[0]];\n\n    if (typeof firstEasing === 'string') {\n      easingObject[prop] = chunkNames\n        .map(chunkName => {\n          const easingName = easingObject[chunkName];\n          delete easingObject[chunkName];\n\n          return easingName;\n        })\n        .join(' ');\n    } else {\n      // firstEasing is a function\n      easingObject[prop] = firstEasing;\n    }\n  }\n};\n\nexport const doesApply = ({ _currentState }) =>\n  Object.keys(_currentState).some(\n    key => typeof _currentState[key] === 'string'\n  );\n\nexport function tweenCreated(tweenable) {\n  const { _currentState, _originalState, _targetState } = tweenable;\n\n  [_currentState, _originalState, _targetState].forEach(\n    sanitizeObjectForHexProps\n  );\n\n  tweenable._tokenData = getFormatSignatures(_currentState);\n}\n\nexport function beforeTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable;\n\n  expandEasingObject(_easing, _tokenData);\n\n  [_currentState, _originalState, _targetState].forEach(state =>\n    expandFormattedProperties(state, _tokenData)\n  );\n}\n\nexport function afterTween(tweenable) {\n  const {\n    _currentState,\n    _originalState,\n    _targetState,\n    _easing,\n    _tokenData,\n  } = tweenable;\n  [_currentState, _originalState, _targetState].forEach(state =>\n    collapseFormattedProperties(state, _tokenData)\n  );\n\n  collapseEasingObject(_easing, _tokenData);\n}\n","import { Tweenable, composeEasingObject, tweenProps } from './tweenable';\n\n// Fake a Tweenable and patch some internals.  This approach allows us to\n// skip uneccessary processing and object recreation, cutting down on garbage\n// collection pauses.\nconst mockTweenable = new Tweenable();\nconst { filters } = Tweenable;\n\n/**\n * Compute the midpoint of two Objects.  This method effectively calculates a\n * specific frame of animation that {@link shifty.Tweenable#tween} does many times\n * over the course of a full tween.\n *\n *     import { interpolate } from 'shifty';\n *\n *     const interpolatedValues = interpolate({\n *         width: '100px',\n *         opacity: 0,\n *         color: '#fff'\n *       }, {\n *         width: '200px',\n *         opacity: 1,\n *         color: '#000'\n *       },\n *       0.5\n *     );\n *\n *     console.log(interpolatedValues); // Logs: {opacity: 0.5, width: \"150px\", color: \"rgb(127,127,127)\"}\n *\n * @method shifty.interpolate\n * @param {Object} from The starting values to tween from.\n * @param {Object} to The ending values to tween to.\n * @param {number} position The normalized position value (between `0.0` and\n * `1.0`) to interpolate the values between `from` and `to` for.  `from`\n * represents `0` and `to` represents `1`.\n * @param {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\n * easing The easing curve(s) to calculate the midpoint against.  You can\n * reference any easing function attached to {@link shifty.Tweenable.formulas},\n * or provide the {@link shifty.easingFunction}(s) directly.  If omitted, this\n * defaults to \"linear\".\n * @param {number} [delay=0] Optional delay to pad the beginning of the\n * interpolated tween with.  This increases the range of `position` from (`0`\n * through `1`) to (`0` through `1 + delay`).  So, a delay of `0.5` would\n * increase all valid values of `position` to numbers between `0` and `1.5`.\n * @return {Object}\n */\nexport const interpolate = (from, to, position, easing, delay = 0) => {\n  const current = { ...from };\n  const easingObject = composeEasingObject(from, easing);\n\n  mockTweenable._filters.length = 0;\n\n  mockTweenable.set({});\n  mockTweenable._currentState = current;\n  mockTweenable._originalState = from;\n  mockTweenable._targetState = to;\n  mockTweenable._easing = easingObject;\n\n  for (const name in filters) {\n    if (filters[name].doesApply(mockTweenable)) {\n      mockTweenable._filters.push(filters[name]);\n    }\n  }\n\n  // Any defined value transformation must be applied\n  mockTweenable._applyFilter('tweenCreated');\n  mockTweenable._applyFilter('beforeTween');\n\n  const interpolatedValues = tweenProps(\n    position,\n    current,\n    from,\n    to,\n    1,\n    delay,\n    easingObject\n  );\n\n  // Transform data in interpolatedValues back into its original format\n  mockTweenable._applyFilter('afterTween');\n\n  return interpolatedValues;\n};\n","export class Scene {\n  #tweenables = [];\n\n  /**\n   * The {@link shifty.Scene} class provides a way to control groups of {@link\n   * shifty.Tweenable}s. It is lightweight, minimalistic, and meant to provide\n   * performant {@link shifty.Tweenable} batch control that users of Shifty\n   * might otherwise have to implement themselves. It is **not** a robust\n   * timeline solution, and it does **not** provide utilities for sophisticated\n   * animation sequencing or orchestration. If that is what you need for your\n   * project, consider using a more robust tool such as\n   * [Rekapi](http://jeremyckahn.github.io/rekapi/doc/) (a timeline layer built\n   * on top of Shifty).\n   *\n   * Please be aware that {@link shifty.Scene} does **not** perform any\n   * automatic cleanup. If you want to remove a {@link shifty.Tweenable} from a\n   * {@link shifty.Scene}, you must do so explicitly with either {@link\n   * shifty.Scene#remove} or {@link shifty.Scene#empty}.\n   *\n   * <p class=\"codepen\" data-height=\"677\" data-theme-id=\"0\" data-default-tab=\"js,result\" data-user=\"jeremyckahn\" data-slug-hash=\"qvZKbe\" style=\"height: 677px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;\" data-pen-title=\"Shifty Scene Demo\">\n   * <span>See the Pen <a href=\"https://codepen.io/jeremyckahn/pen/qvZKbe/\">\n   * Shifty Scene Demo</a> by Jeremy Kahn (<a href=\"https://codepen.io/jeremyckahn\">@jeremyckahn</a>)\n   * on <a href=\"https://codepen.io\">CodePen</a>.</span>\n   * </p>\n   * <script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n   * @param {...shifty.Tweenable} tweenables\n   * @see https://codepen.io/jeremyckahn/pen/qvZKbe\n   * @constructs shifty.Scene\n   */\n  constructor(...tweenables) {\n    tweenables.forEach(this.add.bind(this));\n  }\n\n  /**\n   * A copy of the internal {@link shifty.Tweenable}s array.\n   * @member shifty.Scene#tweenables\n   * @type {Array.<shifty.Tweenable>}\n   * @readonly\n   */\n  get tweenables() {\n    return [...this.#tweenables];\n  }\n\n  /**\n   * The {@link external:Promise}s for all {@link shifty.Tweenable}s in this\n   * {@link shifty.Scene} that have been configured with {@link\n   * shifty.Tweenable#setConfig}. Note that each call of {@link\n   * shifty.Scene#play} or {@link shifty.Scene#pause} creates new {@link\n   * external:Promise}s:\n   *\n   *     const scene = new Scene(new Tweenable());\n   *     scene.play();\n   *\n   *     Promise.all(scene.promises).then(() =>\n   *       // Plays the scene again upon completion, but a new promise is\n   *       // created so this line only runs once.\n   *       scene.play()\n   *     );\n   *\n   * @member shifty.Scene#promises\n   * @type {Array.<external:Promise>}\n   * @readonly\n   */\n  get promises() {\n    return this.#tweenables.map(({ _promise }) => _promise);\n  }\n\n  /**\n   * Add a {@link shifty.Tweenable} to be controlled by this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#add\n   * @param {shifty.Tweenable} tweenable\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was added.\n   */\n  add(tweenable) {\n    this.#tweenables.push(tweenable);\n\n    return tweenable;\n  }\n\n  /**\n   * Remove a {@link shifty.Tweenable} that is controlled by this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#remove\n   * @param {shifty.Tweenable} tweenable\n   * @return {shifty.Tweenable} The {@link shifty.Tweenable} that was removed.\n   */\n  remove(tweenable) {\n    const index = this.#tweenables.indexOf(tweenable);\n\n    if (~index) {\n      this.#tweenables.splice(index, 1);\n    }\n\n    return tweenable;\n  }\n\n  /**\n   * [Remove]{@link shifty.Scene#remove} all {@link shifty.Tweenable}s in this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#empty\n   * @return {Array.<shifty.Tweenable>} The {@link shifty.Tweenable}s that were\n   * removed.\n   */\n  empty() {\n    // Deliberate of the tweenables getter here to create a temporary array\n    return this.tweenables.map(this.remove.bind(this));\n  }\n\n  /**\n   * Is `true` if any {@link shifty.Tweenable} in this {@link shifty.Scene} is\n   * playing.\n   * @method shifty.Scene#isPlaying\n   * @return {boolean}\n   */\n  isPlaying() {\n    return this.#tweenables.some(tweenable => tweenable.isPlaying());\n  }\n\n  /**\n   * Play all {@link shifty.Tweenable}s from their beginning.\n   * @method shifty.Scene#play\n   * @return {shifty.Scene}\n   */\n  play() {\n    this.#tweenables.forEach(tweenable => tweenable.tween());\n\n    return this;\n  }\n\n  /**\n   * {@link shifty.Tweenable#pause} all {@link shifty.Tweenable}s in this\n   * {@link shifty.Scene}.\n   * @method shifty.Scene#pause\n   * @return {shifty.Scene}\n   */\n  pause() {\n    this.#tweenables.forEach(tweenable => tweenable.pause());\n    return this;\n  }\n\n  /**\n   * {@link shifty.Tweenable#resume} all paused {@link shifty.Tweenable}s.\n   * @method shifty.Scene#resume\n   * @return {shifty.Scene}\n   */\n  resume() {\n    this.#tweenables.forEach(tweenable => tweenable.resume());\n\n    return this;\n  }\n\n  /**\n   * {@link shifty.Tweenable#stop} all {@link shifty.Tweenable}s in this {@link\n   * shifty.Scene}.\n   * @method shifty.Scene#stop\n   * @param {boolean} [gotoEnd]\n   * @return {shifty.Scene}\n   */\n  stop(gotoEnd) {\n    this.#tweenables.forEach(tweenable => tweenable.stop(gotoEnd));\n    return this;\n  }\n}\n","import { Tweenable } from './tweenable';\n\n/**\n * The Bezier magic in this file is adapted/copied almost wholesale from\n * [Scripty2](https://github.com/madrobby/scripty2/blob/master/src/effects/transitions/cubic-bezier.js),\n * which was adapted from Apple code (which probably came from\n * [here](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h)).\n * Special thanks to Apple and Thomas Fuchs for much of this code.\n */\n\n/**\n *  Copyright (c) 2006 Apple Computer, Inc. All rights reserved.\n *\n *  Redistribution and use in source and binary forms, with or without\n *  modification, are permitted provided that the following conditions are met:\n *\n *  1. Redistributions of source code must retain the above copyright notice,\n *  this list of conditions and the following disclaimer.\n *\n *  2. Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation\n *  and/or other materials provided with the distribution.\n *\n *  3. Neither the name of the copyright holder(s) nor the names of any\n *  contributors may be used to endorse or promote products derived from\n *  this software without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n *  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n *  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n *  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n *  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n *  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n *  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n *  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n// port of webkit cubic bezier handling by http://www.netzgesta.de/dev/\n\n/**\n * @param {number} t\n * @param {number} p1x\n * @param {number} p1y\n * @param {number} p2x\n * @param {number} p2y\n * @param {number} duration\n * @returns {Function}\n * @private\n */\nfunction cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n  let ax = 0,\n    bx = 0,\n    cx = 0,\n    ay = 0,\n    by = 0,\n    cy = 0;\n\n  const sampleCurveX = t => ((ax * t + bx) * t + cx) * t;\n\n  const sampleCurveY = t => ((ay * t + by) * t + cy) * t;\n\n  const sampleCurveDerivativeX = t => (3 * ax * t + 2 * bx) * t + cx;\n\n  const solveEpsilon = duration => 1 / (200 * duration);\n\n  const fabs = n => (n >= 0 ? n : 0 - n);\n\n  const solveCurveX = (x, epsilon) => {\n    let t0, t1, t2, x2, d2, i;\n\n    for (t2 = x, i = 0; i < 8; i++) {\n      x2 = sampleCurveX(t2) - x;\n\n      if (fabs(x2) < epsilon) {\n        return t2;\n      }\n\n      d2 = sampleCurveDerivativeX(t2);\n\n      if (fabs(d2) < 1e-6) {\n        break;\n      }\n\n      t2 = t2 - x2 / d2;\n    }\n\n    t0 = 0;\n    t1 = 1;\n    t2 = x;\n\n    if (t2 < t0) {\n      return t0;\n    }\n\n    if (t2 > t1) {\n      return t1;\n    }\n\n    while (t0 < t1) {\n      x2 = sampleCurveX(t2);\n\n      if (fabs(x2 - x) < epsilon) {\n        return t2;\n      }\n\n      if (x > x2) {\n        t0 = t2;\n      } else {\n        t1 = t2;\n      }\n\n      t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    return t2; // Failure.\n  };\n\n  const solve = (x, epsilon) => sampleCurveY(solveCurveX(x, epsilon));\n\n  cx = 3 * p1x;\n  bx = 3 * (p2x - p1x) - cx;\n  ax = 1 - cx - bx;\n  cy = 3 * p1y;\n  by = 3 * (p2y - p1y) - cy;\n  ay = 1 - cy - by;\n\n  return solve(t, solveEpsilon(duration));\n}\n// End ported code\n\n/**\n *  GetCubicBezierTransition(x1, y1, x2, y2) -> Function.\n *\n *  Generates a transition easing function that is compatible\n *  with WebKit's CSS transitions `-webkit-transition-timing-function`\n *  CSS property.\n *\n *  The W3C has more information about CSS3 transition timing functions:\n *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag\n *\n *  @param {number} x1\n *  @param {number} y1\n *  @param {number} x2\n *  @param {number} y2\n *  @return {Function}\n *  @private\n */\nconst getCubicBezierTransition = (x1, y1, x2, y2) => pos =>\n  cubicBezierAtTime(pos, x1, y1, x2, y2, 1);\n\n/**\n * Create a Bezier easing function and attach it to {@link\n * shifty.Tweenable.formulas}.  This function gives you total control over the\n * easing curve.  Matthew Lein's [Ceaser](http://matthewlein.com/ceaser/) is a\n * useful tool for visualizing the curves you can make with this function.\n * @method shifty.setBezierFunction\n * @param {string} name The name of the easing curve.  Overwrites the old\n * easing function on {@link shifty.Tweenable.formulas} if it exists.\n * @param {number} x1\n * @param {number} y1\n * @param {number} x2\n * @param {number} y2\n * @return {shifty.easingFunction} The {@link shifty.easingFunction} that was\n * attached to {@link shifty.Tweenable.formulas}.\n */\nexport const setBezierFunction = (name, x1, y1, x2, y2) => {\n  const cubicBezierTransition = getCubicBezierTransition(x1, y1, x2, y2);\n\n  cubicBezierTransition.displayName = name;\n  cubicBezierTransition.x1 = x1;\n  cubicBezierTransition.y1 = y1;\n  cubicBezierTransition.x2 = x2;\n  cubicBezierTransition.y2 = y2;\n\n  return (Tweenable.formulas[name] = cubicBezierTransition);\n};\n\n/**\n * `delete` an easing function from {@link shifty.Tweenable.formulas}.  Be\n * careful with this method, as it `delete`s whatever easing formula matches\n * `name` (which means you can delete standard Shifty easing functions).\n * @method shifty.unsetBezierFunction\n * @param {string} name The name of the easing function to delete.\n * @return {boolean} Whether or not the functions was `delete`d.\n */\nexport const unsetBezierFunction = name => delete Tweenable.formulas[name];\n","/**\n * @namespace shifty\n */\n\nimport { processTweens, Tweenable, tween } from './tweenable';\nimport * as token from './token';\n\nTweenable.filters.token = token;\n\nexport { processTweens, Tweenable, tween };\nexport { interpolate } from './interpolate';\nexport { Scene } from './scene';\nexport { setBezierFunction, unsetBezierFunction } from './bezier';\n\n/**\n * @external Promise\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise}\n */\n\n/**\n * @callback {Function} shifty.easingFunction\n * @param {number} position The normalized (0-1) position of the tween.\n * @return {number} The curve-adjusted value.\n */\n\n/**\n * @callback {Function} shifty.startFunction\n * @param {Object} state The current state of the tween.\n * @param {Object} [attachment] Cached data provided from a {@link\n * shifty.tweenConfig}.\n */\n\n/**\n * Gets called for every tick of the tween.  This function is not called on the\n * final step of the animation.\n * @callback {Function} shifty.stepFunction\n * @param {Object} state The current state of the tween.\n * @param {Object|undefined} attachment Cached data provided from a {@link\n * shifty.tweenConfig}.\n * @param {number} timeElapsed The time elapsed since the start of the tween.\n */\n\n/**\n * @callback shifty.scheduleFunction\n * @param {Function} callback\n * @param {number} timeout\n */\n\n/**\n * @typedef {Object} shifty.tweenConfig\n * @property {Object} [from] Starting position.  If omitted, {@link\n * shifty.Tweenable#get} is used.\n * @property {Object} [to] Ending position.  The keys of this Object should\n * match those of `to`.\n * @property {number} [duration] How many milliseconds to animate for.\n * @property {number} [delay] How many milliseconds to wait before starting the\n * tween.\n * @property {shifty.startFunction} [start] Executes when the tween begins.\n * @property {shifty.stepFunction} [step] Executes on every tick.\n * @property\n * {Object.<string|shifty.easingFunction>|string|shifty.easingFunction}\n * [easing] Easing curve name(s) or {@link shifty.easingFunction}(s) to apply\n * to the properties of the tween.  If this is an Object, the keys should\n * correspond to `to`/`from`.  You can learn more about this in the {@tutorial\n * easing-function-in-depth} tutorial.\n * @property {Object} [attachment] Cached value that is passed to {@link\n * shifty.startFunction}/{@link shifty.stepFunction}.\n * @property {Function} [promise] Promise constructor for when you want\n * to use Promise library or polyfill Promises in unsupported environments.\n */\n\n/**\n * Is called when a tween is created to determine if a filter is needed.\n * Filters are only added to a tween when it is created so that they are not\n * unnecessarily processed if they don't apply during an update tick.\n * @callback {Function} shifty.doesApplyFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n * @return {boolean}\n */\n\n/**\n * Is called when a tween is created.  This should perform any setup needed by\n * subsequent per-tick calls to {@link shifty.beforeTween} and {@link\n * shifty.afterTween}.\n * @callback {Function} shifty.tweenCreatedFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * Is called right before a tween is processed in a tick.\n * @callback {Function} shifty.beforeTweenFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * Is called right after a tween is processed in a tick.\n * @callback {Function} shifty.afterTweenFilter\n * @param {shifty.Tweenable} tweenable The {@link shifty.Tweenable} instance.\n */\n\n/**\n * An Object that contains functions that are called at key points in a tween's\n * lifecycle.  Shifty can only process `Number`s internally, but filters can\n * expand support for any type of data.  This is the mechanism that powers\n * [string interpolation]{@tutorial string-interpolation}.\n * @typedef {Object} shifty.filter\n * @property {shifty.doesApplyFilter} doesApply Is called when a tween is\n * created.\n * @property {shifty.tweenCreatedFilter} tweenCreated Is called when a tween is\n * created.\n * @property {shifty.beforeTweenFilter} beforeTween Is called right before a\n * tween starts.\n * @property {shifty.afterTweenFilter} afterTween Is called right after a tween\n * ends.\n */\n","import loopVisualizer from './visualizer';\nimport { tween } from 'shifty';\n\nexport default () => {\n\t/**\n *\n * Loop Waveform Visualizer by Felix Turner\n * www.airtight.cc\n *\n * Audio Reactive Waveform via Web Audio API.\n *\n */\n\tlet LoopVisualizer;\n\tlet mouseX = 0;\n\tlet mouseY = 0;\n\tlet windowHalfX = window.innerWidth / 2;\n\tlet windowHalfY = window.innerHeight / 2;\n\tlet camera;\n\tlet scene;\n\tlet renderer;\n\tlet container;\n\tlet source;\n\tlet analyser;\n\tlet buffer;\n\tlet audioBuffer;\n\tlet audioContext;\n\tlet started = false;\n\tlet mic = false;\n\n\t$(document).ready(() => {\n\t\t//Chrome is only browser to currently support Web Audio API\n\t\tconst is_webgl = (() => {\n\t\t\ttry {\n\t\t\t\treturn !!window.WebGLRenderingContext && !!document.createElement('canvas').getContext('experimental-webgl');\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})();\n\n\t\tif (!is_webgl) {\n\t\t\t$('#loading').html(\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\">WebGL</a>.<br />' +\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\">here</a>, or try restarting your browser.'\n\t\t\t);\n\t\t} else {\n\t\t\t$('#loading').html('drop mp3 here or <a id=\"loadSample\">load sample mp3</a>');\n\t\t\tinit();\n\t\t}\n\t});\n\n\tfunction init() {\n\t\t//init 3D scene\n\t\tcontainer = document.createElement('div');\n\t\tdocument.body.appendChild(container);\n\t\tcamera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000000);\n\t\tcamera.position.z = 350;\n\t\tscene = new THREE.Scene();\n\t\tscene.add(camera);\n\t\trenderer = new THREE.WebGLRenderer({\n\t\t\tantialias: false,\n\t\t\tsortObjects: false,\n\t\t});\n\t\trenderer.setSize(window.innerWidth, window.innerHeight);\n\n\t\tcontainer.appendChild(renderer.domElement);\n\n\t\t// stop the user getting a text cursor\n\t\tdocument.onselectStart = () => false;\n\n\t\t//add stats\n\t\t// stats = new Stats();\n\t\t// stats.domElement.style.position = 'absolute';\n\t\t// stats.domElement.style.top = '0px';\n\t\t// container.appendChild(stats.domElement);\n\n\t\t//init listeners\n\t\t// $('#loadSample').click(loadSampleAudio);\n\t\t$(document).click(() => {\n\t\t\tinitMic();\n\t\t});\n\t\t$(document).mousemove(onDocumentMouseMove);\n\t\t$(document).mouseleave(() => {\n\t\t\ttween({\n\t\t\t\tfrom: { x: mouseX, y: mouseY },\n\t\t\t\tto: { x: -0.5, y: -0.5 },\n\t\t\t\tduration: 1500,\n\t\t\t\teasing: 'easeOutQuad',\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tmouseX = state.x;\n\t\t\t\t\tmouseY = state.y;\n\t\t\t\t},\n\t\t\t}).then(\n\t\t\t\t() => console.log('All done!')\n\t\t\t);\n\t\t});\n\t\t$(window).resize(onWindowResize);\n\t\tdocument.addEventListener('drop', onDocumentDrop, false);\n\t\tdocument.addEventListener('dragover', onDocumentDragOver, false);\n\n\t\tonWindowResize(null);\n\t}\n\n\t// function loadSampleAudio() {\n\t// \t$('#loading').text('loading...');\n\n\t// \taudioContext = new window.AudioContext();\n\n\t// \tsource = audioContext.createBufferSource();\n\t// \tanalyser = audioContext.createAnalyser();\n\t// \tanalyser.fftSize = 1024;\n\t// \tanalyser.smoothingTimeConstant = 0.1;\n\n\t// \t// Connect audio processing graph\n\t// \tsource.connect(analyser);\n\t// \tanalyser.connect(audioContext.destination);\n\n\t// \t// loadAudioBuffer('audio/EMDCR.mp3');\n\t// }\n\n\t// function loadAudioBuffer(url) {\n\t// \t// Load asynchronously\n\t// \tconst request = new XMLHttpRequest();\n\t// \trequest.open('GET', url, true);\n\t// \trequest.responseType = 'arraybuffer';\n\n\t// \trequest.onload = () => {\n\t// \t\taudioContext.decodeAudioData(\n\t// \t\t\trequest.response,\n\t// \t\t\tbuffer => {\n\t// \t\t\t\taudioBuffer = buffer;\n\t// \t\t\t\tfinishLoad();\n\t// \t\t\t},\n\t// \t\t\te => {\n\t// \t\t\t\tconsole.log(e);\n\t// \t\t\t}\n\t// \t\t);\n\t// \t};\n\t// \trequest.send();\n\t// }\n\n\t// function finishLoad() {\n\t// \tsource.buffer = audioBuffer;\n\t// \tsource.loop = true;\n\t// \tsource.start(0.0);\n\t// \tstartViz();\n\t// }\n\n\tfunction onDocumentMouseMove({ clientX, clientY }) {\n\t\tmouseX = (clientX - windowHalfX) * -0.5;\n\t\tmouseY = (clientY - windowHalfY) * -0.5;\n\t}\n\n\tfunction onWindowResize(event) {\n\t\twindowHalfX = window.innerWidth / 2;\n\t\twindowHalfY = window.innerHeight / 2;\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\tcamera.updateProjectionMatrix();\n\t\trenderer.setSize(window.innerWidth, window.innerHeight);\n\t}\n\n\tfunction animate() {\n\t\trequestAnimationFrame(animate);\n\t\trender();\n\t\t//stats.update();\n\t}\n\n\tfunction render() {\n\t\tLoopVisualizer.update();\n\n\t\t//mouse tilt\n\t\tconst xrot = mouseX / window.innerWidth * Math.PI + Math.PI;\n\t\tconst yrot = mouseY / window.innerHeight * Math.PI + Math.PI;\n\t\tLoopVisualizer.loopHolder.rotation.x += (-yrot - LoopVisualizer.loopHolder.rotation.x) * 0.3;\n\t\tLoopVisualizer.loopHolder.rotation.y += (xrot - LoopVisualizer.loopHolder.rotation.y) * 0.3;\n\n\t\trenderer.render(scene, camera);\n\t}\n\n\t$(window).mousewheel((event, delta) => {\n\t\t//set camera Z\n\t\tcamera.position.z -= delta * 50;\n\t});\n\n\tfunction onDocumentDragOver(evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\treturn false;\n\t}\n\n\tfunction onDocumentDrop(evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\n\t\t//clean up previous mp3\n\t\tif (source) {\n\t\t\tsource.disconnect();\n\t\t\tLoopVisualizer.remove();\n\t\t}\n\n\t\t$('#loading').show();\n\t\t$('#loading').text('loading...');\n\n\t\tconst droppedFiles = evt.dataTransfer.files;\n\n\t\tconst reader = new FileReader();\n\n\t\treader.onload = ({ target }) => {\n\t\t\tconst data = target.result;\n\t\t\tinitAudio(data);\n\t\t};\n\n\t\treader.readAsArrayBuffer(droppedFiles[0]);\n\t}\n\n\tfunction initMic() {\n\t\tif (source) {\n\t\t\tsource.disconnect();\n\t\t\tLoopVisualizer.remove();\n\t\t}\n\n\t\tnavigator.mediaDevices\n    .getUserMedia({ audio: true, video: false })\n    .then((stream) => {\n\t\t\taudioContext = new window.AudioContext();\n      // const gainNode = context.createGain();\n\n\t\t\tsource = audioContext.createMediaStreamSource(stream);\n\t\t\tmic = true;\n\t\t\tcreateAudio();\n\t\t});\n\t}\n\n\tfunction initAudio(data) {\n\t\t// navigator.mediaDevices\n    // .getUserMedia({ audio: true, video: false })\n    // .then((stream) => {\n\t\t// \taudioContext = new window.AudioContext();\n\n\t\t// \tsource = audioContext.createMediaStreamSource(stream);\n\t\t// \tcreateAudio();\n\t\t// });\n\t\taudioContext = new window.AudioContext();\n\t\t\n\t\tsource = audioContext.createBufferSource();\n\n\t\tif (audioContext.decodeAudioData) {\n\t\t\taudioContext.decodeAudioData(\n\t\t\t\tdata,\n\t\t\t\tbuffer => {\n\t\t\t\t\tsource.buffer = buffer;\n\t\t\t\t\tsource.connect(audioContext.destination);\n\t\t\t\t\tsource.start(0);\n\t\t\t\t\tmic = false;\n\t\t\t\t\tcreateAudio();\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t$('#loading').text('cannot decode mp3');\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tsource.buffer = audioContext.createBuffer(data, false);\n\t\t\tmic = false;\n\t\t\tcreateAudio();\n\t\t}\n\t}\n\n\tfunction createAudio() {\n\t\tanalyser = audioContext.createAnalyser();\n\t\tanalyser.fftSize = 1024;\n\t\tanalyser.smoothingTimeConstant = 0.1;\n\t\tsource.connect(analyser);\n\t\t// source.loop = true;\n\n\t\tstartViz();\n\t}\n\n\tfunction startViz() {\n\t\t$('#loading').hide();\n\n\t\tLoopVisualizer = loopVisualizer(scene, analyser, mic);\n\t\tLoopVisualizer.init();\n\n\t\tif (!started) {\n\t\t\tstarted = true;\n\t\t\tanimate();\n\t\t}\n\t}\n}","import dayjs from 'dayjs';\nimport 'dayjs/locale/es';\n// import { initVisualizer } from './core';\nimport speech from './core/speech';\nimport visualizer from './core/visualizer';\n\ndayjs.locale('es');\n\n// visualizer();\nlet started = false;\n\nwindow.onload = () => {\n  window.addEventListener('click', () => {\n    // initVisualizer();\n    if (!started) {\n      visualizer();\n      speech();\n      started = true;\n    }\n  })\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}